<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Javaè®¾è®¡æ¨¡å¼ | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Javaè®¾è®¡æ¨¡å¼å­¦ä¹ åˆ›å»ºå‹æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå¹¶ä¸å±äºè®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œä¸è¿‡è¿™é‡Œè¿˜æ˜¯ç®€å•è®°å½•ä¸‹ã€‚ å®šä¹‰ï¼šç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§ç±»å‹å®ä¾‹ã€‚å®¢æˆ·ç«¯åªéœ€ä¼ å…¥å·¥å‚ç±»çš„å‚æ•°ï¼Œæ— å¿ƒå…³å¿ƒåˆ›å»ºè¿‡ç¨‹ã€‚ ä¼˜ç‚¹ï¼šå…·ä½“äº§å“ä»å®¢æˆ·ç«¯ä»£ç ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œè§£è€¦ã€‚ ç¼ºç‚¹ï¼šå·¥å‚ç±»èŒè´£è¿‡é‡ï¼Œå¢åŠ æ–°çš„ç±»å‹æ—¶ï¼Œå¾—ä¿®æ”¹å·¥ç¨‹ç±»å¾—ä»£ç ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ã€‚ ä¸¾ä¾‹ï¼šæ–°å»ºFruitæ°´æœæŠ½è±¡ç±»ï¼ŒåŒ…å«eatæŠ½è±¡æ–¹æ³•ï¼š 1234p">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaè®¾è®¡æ¨¡å¼">
<meta property="og:url" content="http://example.com/2021/12/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Javaè®¾è®¡æ¨¡å¼å­¦ä¹ åˆ›å»ºå‹æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå¹¶ä¸å±äºè®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œä¸è¿‡è¿™é‡Œè¿˜æ˜¯ç®€å•è®°å½•ä¸‹ã€‚ å®šä¹‰ï¼šç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§ç±»å‹å®ä¾‹ã€‚å®¢æˆ·ç«¯åªéœ€ä¼ å…¥å·¥å‚ç±»çš„å‚æ•°ï¼Œæ— å¿ƒå…³å¿ƒåˆ›å»ºè¿‡ç¨‹ã€‚ ä¼˜ç‚¹ï¼šå…·ä½“äº§å“ä»å®¢æˆ·ç«¯ä»£ç ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œè§£è€¦ã€‚ ç¼ºç‚¹ï¼šå·¥å‚ç±»èŒè´£è¿‡é‡ï¼Œå¢åŠ æ–°çš„ç±»å‹æ—¶ï¼Œå¾—ä¿®æ”¹å·¥ç¨‹ç±»å¾—ä»£ç ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ã€‚ ä¸¾ä¾‹ï¼šæ–°å»ºFruitæ°´æœæŠ½è±¡ç±»ï¼ŒåŒ…å«eatæŠ½è±¡æ–¹æ³•ï¼š 1234p">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2021-11-30T16:02:17.000Z">
<meta property="article:modified_time" content="2021-12-06T15:22:31.834Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/12/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-12-06 23:22:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/null" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a></div></div></div><hr/></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hexo</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Javaè®¾è®¡æ¨¡å¼</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-11-30T16:02:17.000Z" title="Created 2021-12-01 00:02:17">2021-12-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-06T15:22:31.834Z" title="Updated 2021-12-06 23:22:31">2021-12-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Javaè®¾è®¡æ¨¡å¼å­¦ä¹ "><a href="#Javaè®¾è®¡æ¨¡å¼å­¦ä¹ " class="headerlink" title="Javaè®¾è®¡æ¨¡å¼å­¦ä¹ "></a>Javaè®¾è®¡æ¨¡å¼å­¦ä¹ </h2><h2 id="åˆ›å»ºå‹æ¨¡å¼"><a href="#åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼"></a>åˆ›å»ºå‹æ¨¡å¼</h2><h3 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h3><p>ç®€å•å·¥å‚æ¨¡å¼ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå¹¶ä¸å±äºè®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œä¸è¿‡è¿™é‡Œè¿˜æ˜¯ç®€å•è®°å½•ä¸‹ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼šç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§ç±»å‹å®ä¾‹ã€‚å®¢æˆ·ç«¯åªéœ€ä¼ å…¥å·¥å‚ç±»çš„å‚æ•°ï¼Œæ— å¿ƒå…³å¿ƒåˆ›å»ºè¿‡ç¨‹ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå…·ä½“äº§å“ä»å®¢æˆ·ç«¯ä»£ç ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œè§£è€¦ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå·¥å‚ç±»èŒè´£è¿‡é‡ï¼Œå¢åŠ æ–°çš„ç±»å‹æ—¶ï¼Œå¾—ä¿®æ”¹å·¥ç¨‹ç±»å¾—ä»£ç ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ã€‚</p>
<p>ä¸¾ä¾‹ï¼šæ–°å»ºFruitæ°´æœæŠ½è±¡ç±»ï¼ŒåŒ…å«eatæŠ½è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Fruit &#123;</span><br><span class="line"></span><br><span class="line">    public abstract void eat();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å…¶å®ç°ç±»Appleï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Apple extends Fruit&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void eat() &#123;</span><br><span class="line">        System.out.println(&quot;åƒğŸ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºåˆ›å»ºFruitçš„å·¥å‚ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class FruitFactory &#123;</span><br><span class="line"></span><br><span class="line">    public Fruit produce(String name) &#123;</span><br><span class="line">        if (&quot;apple&quot;.equals(name)) &#123;</span><br><span class="line">            return new Apple();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºä¸ªå®¢æˆ·ç«¯æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        FruitFactory factory &#x3D; new FruitFactory();</span><br><span class="line">        Fruit fruit &#x3D; factory.produce(&quot;apple&quot;);</span><br><span class="line">        fruit.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¿è¡Œmainæ–¹æ³•ï¼Œè¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åƒğŸ</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯Applicationå¹¶æœªä¾èµ–å…·ä½“çš„æ°´æœç±»å‹ï¼Œåªå…³å¿ƒFruitFactoryçš„å…¥å‚ï¼Œè¿™å°±æ˜¯å®¢æˆ·ç«¯å’Œå…·ä½“äº§å“è§£è€¦çš„ä½“ç°ï¼ŒUMLå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191216103019.png" alt="QQæˆªå›¾20191216103019.png"></p>
<h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h3><p>ä¸ºäº†è§£å†³ç®€å•å·¥å‚æ¨¡å¼çš„ç¼ºç‚¹ï¼Œè¯ç”Ÿäº†å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory method patternï¼‰ã€‚</p>
<p><strong>å®šä¹‰</strong>ï¼šå®šä¹‰åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å®ç°è¿™ä¸ªæ¥å£çš„ç±»æ¥å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ï¼Œå·¥å‚æ–¹æ³•è®©ç±»çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°äº†å­ç±»è¿›è¡Œã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>å…·ä½“äº§å“ä»å®¢æˆ·ç«¯ä»£ç ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œè§£è€¦ã€‚</li>
<li>åŠ å…¥æ–°çš„ç±»å‹æ—¶ï¼Œåªéœ€æ·»åŠ æ–°çš„å·¥å‚æ–¹æ³•ï¼ˆæ— éœ€ä¿®æ”¹æ—§çš„å·¥å‚æ–¹æ³•ä»£ç ï¼‰ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong>ï¼šç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ å¤æ‚åº¦ã€‚</p>
<p>ä¸¾ä¾‹ï¼šæ–°å»ºFruitæŠ½è±¡ç±»ï¼ŒåŒ…å«eatæŠ½è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Fruit &#123;</span><br><span class="line"></span><br><span class="line">    public abstract void eat();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºFruitFactoryæŠ½è±¡å·¥å‚ï¼Œå®šä¹‰produceFruitæŠ½è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class FruitFactory &#123;</span><br><span class="line"></span><br><span class="line">    public abstract Fruit produceFruit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºFruitçš„å®ç°ç±»ï¼ŒAppleï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Apple extends Fruit &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void eat() &#123;</span><br><span class="line">        System.out.println(&quot;åƒğŸ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºFruitFactoryçš„å®ç°ç±»AppleFruitFactoryï¼Œç”¨äºç”Ÿäº§å…·ä½“ç±»å‹çš„æ°´æœ â€”â€” è‹¹æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class AppleFruitFactory extends FruitFactory&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Fruit produceFruit() &#123;</span><br><span class="line">        return new Apple();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºå®¢æˆ·ç«¯Applicationæµ‹è¯•ä¸€æ³¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        FruitFactory factory &#x3D; new AppleFruitFactory();</span><br><span class="line">        Fruit fruit &#x3D; factory.produceFruit();</span><br><span class="line">        fruit.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¿è¡Œmainæ–¹æ³•ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åƒğŸ</span><br></pre></td></tr></table></figure>


<p>ç°åœ¨è¦æ–°å¢Bananaç±»å‹çš„æ°´æœï¼Œåªéœ€è¦æ–°å¢Bananaç±»å‹çš„å·¥å‚ç±»å³å¯ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰çš„AppleFruitFactoryä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚ä½†æ˜¯è¿™ç§æ¨¡å¼çš„ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œå°±æ˜¯ç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ å¤æ‚åº¦ã€‚</p>
<p>ä¸Šé¢ä¾‹å­UMLå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191216105317.png" alt="QQæˆªå›¾20191216105317.png"></p>
<h3 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h3><p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract factory patternï¼‰æä¾›äº†<strong>ä¸€ç³»åˆ—</strong>ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„å¯¹è±¡çš„æ¥å£ï¼Œå…³é”®å­—æ˜¯â€œä¸€ç³»åˆ—â€ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>å…·ä½“äº§å“ä»å®¢æˆ·ç«¯ä»£ç ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œè§£è€¦ã€‚</li>
<li>å°†ä¸€ä¸ªç³»åˆ—çš„äº§å“æ—ç»Ÿä¸€åˆ°ä¸€èµ·åˆ›å»ºã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong>ï¼šæ‹“å±•æ–°çš„åŠŸèƒ½å›°éš¾ï¼Œéœ€è¦ä¿®æ”¹æŠ½è±¡å·¥å‚çš„æ¥å£ï¼›</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼é€‚åˆé‚£äº›åŠŸèƒ½ç›¸å¯¹å›ºå®šçš„äº§å“æ—çš„åˆ›å»ºã€‚</p>
<p>ä¸¾ä¾‹ï¼šæ–°å»ºæ°´æœæŠ½è±¡ç±»Fruitï¼ŒåŒ…å«buyæŠ½è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Fruit &#123;</span><br><span class="line"></span><br><span class="line">    public abstract void buy();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºä»·æ ¼æŠ½è±¡ç±»Priceï¼ŒåŒ…å«payæŠ½è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Price &#123;</span><br><span class="line"></span><br><span class="line">    public abstract void pay();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºæ°´æœåˆ›å»ºå·¥å‚æ¥å£FruitFactoryï¼ŒåŒ…å«è·å–æ°´æœå’Œä»·æ ¼æŠ½è±¡æ–¹æ³•ï¼ˆäº§å“æ—çš„ä½“ç°æ˜¯ï¼Œä¸€ç»„äº§å“åŒ…å«æ°´æœå’Œå¯¹åº”çš„ä»·æ ¼ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface FruitFactory &#123;</span><br><span class="line"></span><br><span class="line">    Fruit getFruit();</span><br><span class="line">    Price getPrice();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ¥ä¸‹æ¥å¼€å§‹åˆ›å»ºğŸè¿™ä¸ªâ€œäº§å“æ—â€ã€‚æ–°å»ºFruitå®ç°ç±»AppleFruitï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class AppleFruit extends Fruit&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void buy() &#123;</span><br><span class="line">        System.out.println(&quot;è´­ä¹°ğŸ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºå¯¹åº”çš„è‹¹æœä»·æ ¼å®ç°ApplePriceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class ApplePrice extends Price&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void pay() &#123;</span><br><span class="line">        System.out.println(&quot;ğŸå•ä»·2å…ƒ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åˆ›å»ºå®¢æˆ·ç«¯Applicationï¼Œæµ‹è¯•ä¸€æ³¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        FruitFactory factory &#x3D; new AppleFruitFactory();</span><br><span class="line">        factory.getFruit().buy();</span><br><span class="line">        factory.getPrice().pay();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è´­ä¹°ğŸ</span><br><span class="line">ğŸå•ä»·2å…ƒ</span><br></pre></td></tr></table></figure>


<p>å®¢æˆ·ç«¯åªéœ€è¦é€šè¿‡åˆ›å»ºAppleFruitFactoryå°±å¯ä»¥è·å¾—è‹¹æœè¿™ä¸ªäº§å“æ—çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬è‹¹æœå¯¹è±¡ï¼Œè‹¹æœä»·æ ¼ã€‚è¦æ–°å»ºğŸŒçš„äº§å“æ—ï¼Œåªéœ€è¦å®ç°FruitFactoryã€Priceå’ŒFruitæ¥å£å³å¯ã€‚è¿™ç§æ¨¡å¼çš„ç¼ºç‚¹å’Œå·¥å‚æ–¹æ³•å·®ä¸å¤šï¼Œå°±æ˜¯ç±»çš„ä¸ªæ•°å®¹æ˜“è¿‡å¤šï¼Œå¢åŠ å¤æ‚åº¦ã€‚</p>
<p>ä¸Šé¢ä¾‹å­UMLå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191216112922.png" alt="QQæˆªå›¾20191216112922.png"></p>
<h3 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h3><p>å»ºé€ è€…æ¨¡å¼ä¹Ÿç§°ä¸ºç”Ÿæˆå™¨æ¨¡å¼ï¼ˆBuilder Patternï¼‰ï¼Œå°†å¤æ‚å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼ˆæŠ½è±¡ç±»åˆ«ï¼‰ï¼Œä½¿è¿™ä¸ªæŠ½è±¡è¿‡ç¨‹çš„ä¸åŒå®ç°æ–¹æ³•å¯ä»¥æ„é€ å‡ºä¸åŒè¡¨ç°ï¼ˆå±æ€§ï¼‰çš„å¯¹è±¡ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼Œç›¸åŒçš„è¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“ã€‚</p>
<p>å°†å¤æ‚å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼ˆæŠ½è±¡ç±»åˆ«ï¼‰ï¼Œä½¿è¿™ä¸ªæŠ½è±¡è¿‡ç¨‹çš„ä¸åŒå®ç°æ–¹æ³•å¯ä»¥æ„é€ å‡ºä¸åŒè¡¨ç°ï¼ˆå±æ€§ï¼‰çš„å¯¹è±¡ã€‚</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯ï¼Œç›¸åŒçš„è¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>ä¸€ä¸ªå¯¹è±¡æœ‰éå¸¸å¤æ‚çš„å†…éƒ¨ç»“æ„ï¼ˆå¾ˆå¤šå±æ€§ï¼‰</li>
<li>æƒ³å°†å¤æ‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ã€‚</li>
</ol>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ol>
<li>å°è£…æ€§å¥½ï¼Œåˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»</li>
<li>æ‹“å±•æ€§å¥½ï¼Œå»ºé€ ç±»ä¹‹é—´ç‹¬ç«‹ï¼Œä¸€å®šç¨‹åº¦ä¸Šè§£è€¦ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ol>
<li>äº§ç”Ÿå¤šä½™çš„Builderå¯¹è±¡ï¼›</li>
<li>äº§å“å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œå»ºé€ è€…éœ€è¦æ›´æ”¹ï¼Œæˆæœ¬è¾ƒå¤§ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>æ–°å¢å•†é“ºç±»Shopï¼ŒåŒ…å«åç§°ï¼Œåœ°ç‚¹å’Œç±»å‹å±æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class Shop &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private String location;</span><br><span class="line">    private String type;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Shop&#123;&quot; +</span><br><span class="line">                &quot;name&#x3D;&#39;&quot; + name + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, location&#x3D;&#39;&quot; + location + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, type&#x3D;&#39;&quot; + type + &#39;\&#39;&#39; +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getLocation() &#123;</span><br><span class="line">        return location;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setLocation(String location) &#123;</span><br><span class="line">        this.location &#x3D; location;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getType() &#123;</span><br><span class="line">        return type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setType(String type) &#123;</span><br><span class="line">        this.type &#x3D; type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ¥ç€åˆ›å»ºShopæŠ½è±¡ç”Ÿæˆå™¨ShopBuilderï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public abstract class ShopBuilder &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private String location;</span><br><span class="line">    private String type;</span><br><span class="line"></span><br><span class="line">    public abstract void name(String name);</span><br><span class="line">    public abstract void location(String location);</span><br><span class="line">    public abstract void type(String type);</span><br><span class="line"></span><br><span class="line">    public abstract Shop build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŒ…å«å’ŒShopç›¸åŒçš„å±æ€§åŠå¯¹åº”çš„æŠ½è±¡æ„å»ºæ–¹æ³•ã€‚</p>
<p>ç»§ç»­åˆ›å»ºShopBuilderçš„å®ç°ï¼Œæ°´æœåº—æ„é€ å™¨FruitShopBuilderï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class FruitShopBuilder extends ShopBuilder&#123;</span><br><span class="line"></span><br><span class="line">    private Shop shop &#x3D; new Shop();</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void name(String name) &#123;</span><br><span class="line">        this.shop.setName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void location(String location) &#123;</span><br><span class="line">        this.shop.setLocation(location);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void type(String type) &#123;</span><br><span class="line">        this.shop.setType(type);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Shop build() &#123;</span><br><span class="line">        return shop;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åˆ›å»ºä¸ªç»é”€å•†ç±»Dealerï¼Œç”¨äºé€šè¿‡ShopBuilderæ„å»ºå…·ä½“çš„å•†åº—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Dealer &#123;</span><br><span class="line"></span><br><span class="line">    private ShopBuilder builder;</span><br><span class="line"></span><br><span class="line">    public void setBuilder(ShopBuilder builder) &#123;</span><br><span class="line">        this.builder &#x3D; builder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Shop build(String name, String location, String type) &#123;</span><br><span class="line">        this.builder.name(name);</span><br><span class="line">        this.builder.location(location);</span><br><span class="line">        this.builder.type(type);</span><br><span class="line">        return builder.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åˆ›å»ºä¸ªå®¢æˆ·ç«¯Applicationæµ‹è¯•ä¸€æ³¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ShopBuilder builder &#x3D; new FruitShopBuilder();</span><br><span class="line">        Dealer dealer &#x3D; new Dealer();</span><br><span class="line">        dealer.setBuilder(builder);</span><br><span class="line"></span><br><span class="line">        Shop shop &#x3D; dealer.build(&quot;XXæ°´æœåº—&quot;, &quot;ç¦å·å¸‚XXåŒºXXè¡—XXå·&quot;, &quot;æ°´æœç»è¥&quot;);</span><br><span class="line">        System.out.println(shop);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Shop&#123;name&#x3D;&#39;XXæ°´æœåº—&#39;, location&#x3D;&#39;ç¦å·å¸‚XXåŒºXXè¡—XXå·&#39;, type&#x3D;&#39;æ°´æœç»è¥&#39;&#125;</span><br></pre></td></tr></table></figure>


<p>è¿™ä¸ªä¾‹å­æ˜¯å…¸å‹çš„å»ºé€ è€…æ¨¡å¼ï¼ŒUMLå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191216162813.png" alt="QQæˆªå›¾20191216162813.png"></p>
<p>å…¶å®å»ºé€ è€…æ¨¡å¼æ›´ä¸ºå¸¸ç”¨çš„ä¾‹å­æ˜¯ä¸‹é¢è¿™ä¸ªï¼š</p>
<p>åˆ›å»ºä¸€ä¸ªåº—é“ºç±»Shopï¼ŒShopé‡ŒåŒ…å«æ„é€ è¯¥Shopçš„å†…éƒ¨ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public class Shop &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private String location;</span><br><span class="line">    private String type;</span><br><span class="line"></span><br><span class="line">    public Shop(ShopBuilder builder) &#123;</span><br><span class="line">        this.name &#x3D; builder.name;</span><br><span class="line">        this.location &#x3D; builder.location;</span><br><span class="line">        this.type &#x3D; builder.type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Shop&#123;&quot; +</span><br><span class="line">                &quot;name&#x3D;&#39;&quot; + name + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, location&#x3D;&#39;&quot; + location + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, type&#x3D;&#39;&quot; + type + &#39;\&#39;&#39; +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class ShopBuilder &#123;</span><br><span class="line">        private String name;</span><br><span class="line">        private String location;</span><br><span class="line">        private String type;</span><br><span class="line"></span><br><span class="line">        public ShopBuilder name(String name) &#123;</span><br><span class="line">            this.name &#x3D; name;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public ShopBuilder location(String location) &#123;</span><br><span class="line">            this.location &#x3D; location;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public ShopBuilder type(String type) &#123;</span><br><span class="line">            this.type &#x3D; type;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Shop build() &#123;</span><br><span class="line">            return new Shop(this);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åœ¨å®¢æˆ·ç«¯æ„å»ºShopåªéœ€ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Shop shop &#x3D; new Shop.ShopBuilder()</span><br><span class="line">                .name(&quot;XXæ°´æœåº—&quot;)</span><br><span class="line">                .location(&quot;ç¦å·å¸‚XXåŒºXXè¡—XXå·&quot;)</span><br><span class="line">                .type(&quot;æ°´æœç»è¥&quot;)</span><br><span class="line">                .build();</span><br><span class="line">        System.out.println(shop);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¿™ç§ç”¨æ³•å’ŒLombokçš„@Builderæ³¨è§£æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>è¿™ä¸ªä¾‹å­çš„UMLå›¾ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191216163308.png" alt="QQæˆªå›¾20191216163308.png"></p>
<h3 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h3><p>å•ä¾‹æ¨¡å¼ç›®çš„æ˜¯ä¸ºäº†ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜å¼€é”€ï¼›</li>
<li>å¯ä»¥é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼›</li>
<li>è®¾ç½®å…¨å±€è®¿é—®ç‚¹ï¼Œä¸¥æ ¼æ§åˆ¶è®¿é—®ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ²¡æœ‰æ¥å£ï¼Œæ‹“å±•å›°éš¾ã€‚</li>
</ol>
<h4 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h4><p>æ‡’æ±‰æ¨¡å¼ä¸‹çš„å•ä¾‹å†™æ³•æ˜¯æœ€ç®€å•çš„ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class LazySingleton &#123;</span><br><span class="line"></span><br><span class="line">    private static LazySingleton lazySingleton &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private LazySingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static LazySingleton getInstance() &#123;</span><br><span class="line">        if (lazySingleton &#x3D;&#x3D; null) &#123;</span><br><span class="line">            lazySingleton &#x3D; new LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        return lazySingleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å¯åŠ åŒæ­¥é”è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class LazySingleton &#123;</span><br><span class="line"></span><br><span class="line">    private static LazySingleton lazySingleton &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private LazySingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static LazySingleton getInstance() &#123;</span><br><span class="line">        synchronized (LazySingleton.class) &#123;</span><br><span class="line">            if (lazySingleton &#x3D;&#x3D; null) &#123;</span><br><span class="line">                lazySingleton &#x3D; new LazySingleton();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return lazySingleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä½†æ˜¯åŒæ­¥é”é”çš„æ˜¯æ•´ä¸ªç±»ï¼Œæ¯”è¾ƒæ¶ˆè€—èµ„æºï¼Œå¹¶ä¸”å³ä½¿è¿è¡Œå†…å­˜ä¸­å·²ç»å­˜åœ¨LazySingletonï¼Œè°ƒç”¨å…¶getInstanceè¿˜æ˜¯ä¼šä¸Šé”ï¼Œæ‰€ä»¥è¿™ç§å†™æ³•ä¹Ÿä¸æ˜¯å¾ˆå¥½ã€‚</p>
<h4 id="åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼"><a href="#åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼" class="headerlink" title="åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼"></a>åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class LazyDoubleCheckSingleton &#123;</span><br><span class="line"></span><br><span class="line">    private static LazyDoubleCheckSingleton instance &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private LazyDoubleCheckSingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static LazyDoubleCheckSingleton getInstance() &#123;</span><br><span class="line">        if (instance &#x3D;&#x3D; null) &#123;</span><br><span class="line">            synchronized (LazyDoubleCheckSingleton.class) &#123;</span><br><span class="line">                if (instance &#x3D;&#x3D; null) &#123;</span><br><span class="line">                    instance &#x3D; new LazyDoubleCheckSingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä¾‹å­è™½ç„¶åŠ äº†åŒæ­¥é”ï¼Œä½†å®ƒè¿˜æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚è™½ç„¶ä¸Šé¢çš„ä¾‹å­ä¸ä¼šå‡ºç°å¤šæ¬¡åˆå§‹åŒ–LazyDoubleCheckSingletonå®ä¾‹çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºæŒ‡ä»¤é‡æ’çš„åŸå› ï¼ŒæŸäº›çº¿ç¨‹å¯èƒ½ä¼šè·å–åˆ°ç©ºå¯¹è±¡ï¼Œåç»­å¯¹è¯¥å¯¹è±¡çš„æ“ä½œå°†è§¦å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<p>è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦é˜»æ­¢æŒ‡ä»¤é‡æ’å³å¯ï¼Œæ‰€ä»¥å¯ä»¥ç»™instanceå±æ€§åŠ ä¸Švolatileå…³é”®å­—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class LazyDoubleCheckSingleton &#123;</span><br><span class="line"></span><br><span class="line">    private volatile static LazyDoubleCheckSingleton instance &#x3D; null;</span><br><span class="line"></span><br><span class="line">    private LazyDoubleCheckSingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static LazyDoubleCheckSingleton getInstance() &#123;</span><br><span class="line">        if (instance &#x3D;&#x3D; null) &#123;</span><br><span class="line">            synchronized (LazyDoubleCheckSingleton.class) &#123;</span><br><span class="line">                if (instance &#x3D;&#x3D; null) &#123;</span><br><span class="line">                    instance &#x3D; new LazyDoubleCheckSingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç›¸å…³åšæ–‡ï¼š<a target="_blank" rel="noopener" href="https://mrbird.cc/volatile.html">æ·±å…¥ç†è§£volatileå…³é”®å­—</a>ã€‚</p>
<p>ä¸Šé¢è¿™ç§å†™æ³•æ˜¯ä¸ä½†ç¡®ä¿äº†çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”å½“LazyDoubleCheckSingletonå®ä¾‹åˆ›å»ºå¥½åï¼Œåç»­å†è°ƒç”¨å…¶getInstanceæ–¹æ³•ä¸ä¼šä¸Šé”ã€‚</p>
<h4 id="é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼"><a href="#é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼" class="headerlink" title="é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼"></a>é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼</h4><p>çœ‹ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class StaticInnerClassSingleton &#123;</span><br><span class="line"></span><br><span class="line">    private StaticInnerClassSingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class InnerClass &#123;</span><br><span class="line">        private static StaticInnerClassSingleton instance &#x3D; new StaticInnerClassSingleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static StaticInnerClassSingleton getInstance() &#123;</span><br><span class="line">        return InnerClass.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä¸ºä»€ä¹ˆè¿™ä¸ªä¾‹å­æ˜¯å¯è¡Œçš„å‘¢ï¼Ÿä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p>
<ol>
<li>JVMåœ¨ç±»çš„åˆå§‹åŒ–é˜¶æ®µä¼šåŠ Classå¯¹è±¡åˆå§‹åŒ–åŒæ­¥é”ï¼ŒåŒæ­¥å¤šä¸ªçº¿ç¨‹å¯¹è¯¥ç±»çš„åˆå§‹åŒ–æ“ä½œï¼›</li>
<li>é™æ€å†…éƒ¨ç±»InnerClassçš„é™æ€æˆå‘˜å˜é‡instanceåœ¨æ–¹æ³•åŒºä¸­åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>
</ol>
<p>åœ¨Javaè§„èŒƒä¸­ï¼Œå½“ä»¥ä¸‹è¿™äº›æƒ…å†µé¦–æ¬¡å‘ç”Ÿæ—¶ï¼ŒAç±»å°†ä¼šç«‹åˆ»è¢«åˆå§‹åŒ–ï¼š</p>
<ol>
<li>Aç±»å‹å®ä¾‹è¢«åˆ›å»ºï¼›</li>
<li>Aç±»ä¸­å£°æ˜çš„é™æ€æ–¹æ³•è¢«è°ƒç”¨ï¼›</li>
<li>Aç±»ä¸­çš„é™æ€æˆå‘˜å˜é‡è¢«èµ‹å€¼ï¼›</li>
<li>Aç±»ä¸­çš„é™æ€æˆå‘˜è¢«ä½¿ç”¨ï¼ˆéå¸¸é‡ï¼‰ï¼›</li>
</ol>
<h4 id="é¥¿æ±‰å•ä¾‹æ¨¡å¼"><a href="#é¥¿æ±‰å•ä¾‹æ¨¡å¼" class="headerlink" title="é¥¿æ±‰å•ä¾‹æ¨¡å¼"></a>é¥¿æ±‰å•ä¾‹æ¨¡å¼</h4><p>â€œé¥¿æ±‰â€æ„æŒ‡åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±åˆå§‹åŒ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class HungrySingleton &#123;</span><br><span class="line"></span><br><span class="line">    private final static HungrySingleton instance &#x3D; new HungrySingleton();</span><br><span class="line"></span><br><span class="line">    private HungrySingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static HungrySingleton getInstance() &#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¿™ç§æ¨¡å¼åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ‰€ä»¥å¹¶ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜ï¼›ä½†ç”±äºä¸æ˜¯æ‡’åŠ è½½ï¼Œé¥¿æ±‰æ¨¡å¼ä¸ç®¡éœ€ä¸éœ€è¦ç”¨åˆ°å®ä¾‹éƒ½è¦å»åˆ›å»ºå®ä¾‹ï¼Œå¦‚æœåˆ›å»ºäº†ä¸ä½¿ç”¨ï¼Œåˆ™ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚</p>
<h4 id="åºåˆ—åŒ–ç ´åå•ä¾‹æ¨¡å¼"><a href="#åºåˆ—åŒ–ç ´åå•ä¾‹æ¨¡å¼" class="headerlink" title="åºåˆ—åŒ–ç ´åå•ä¾‹æ¨¡å¼"></a>åºåˆ—åŒ–ç ´åå•ä¾‹æ¨¡å¼</h4><p>å‰é¢çš„å•ä¾‹ä¾‹å­åœ¨å®ç°åºåˆ—åŒ–æ¥å£åéƒ½èƒ½è¢«åºåˆ—åŒ–çš„æ–¹å¼ç ´åï¼Œæ¯”å¦‚HungrySingletonï¼Œè®©å…¶å®ç°åºåˆ—åŒ–æ¥å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class HungrySingleton implements Serializable &#123;</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID &#x3D; -8073288969651806838L;</span><br><span class="line"></span><br><span class="line">    private final static HungrySingleton instance &#x3D; new HungrySingleton();</span><br><span class="line"></span><br><span class="line">    private HungrySingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static HungrySingleton getInstance() &#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç„¶ååˆ›å»ºApplicationæµ‹è¯•ä¸€ä¸‹å¦‚ä½•ç ´åï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException &#123;</span><br><span class="line">        &#x2F;&#x2F; æ¼”ç¤ºåºåˆ—åŒ–ç ´åå•ä¾‹</span><br><span class="line">        HungrySingleton instance &#x3D; HungrySingleton.getInstance();</span><br><span class="line">        ObjectOutputStream outputStream &#x3D; new ObjectOutputStream(new FileOutputStream(&quot;file&quot;));</span><br><span class="line">        outputStream.writeObject(instance);</span><br><span class="line"></span><br><span class="line">        ObjectInputStream inputStream &#x3D; new ObjectInputStream(new FileInputStream(&quot;file&quot;));</span><br><span class="line">        HungrySingleton newInstance &#x3D; (HungrySingleton) inputStream.readObject();</span><br><span class="line"></span><br><span class="line">        System.out.println(instance);</span><br><span class="line">        System.out.println(newInstance);</span><br><span class="line">        System.out.println(instance &#x3D;&#x3D; newInstance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cc.mrbird.design.pattern.creational.singleton.HungrySingleton@7f31245a</span><br><span class="line">cc.mrbird.design.pattern.creational.singleton.HungrySingleton@6d03e736</span><br><span class="line">false</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä½†å´æˆåŠŸåˆ›å»ºå‡ºäº†ä¸¤ä¸ªä¸ä¸€æ ·çš„å®ä¾‹ï¼Œå•ä¾‹é­åˆ°äº†ç ´åã€‚</p>
<p>è¦è®©ååºåˆ—åŒ–åçš„å¯¹è±¡å’Œåºåˆ—åŒ–å‰çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œå¯ä»¥åœ¨HungrySingletoné‡ŒåŠ ä¸ŠreadResolveæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class HungrySingleton implements Serializable &#123;</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID &#x3D; -8073288969651806838L;</span><br><span class="line"></span><br><span class="line">    private final static HungrySingleton instance &#x3D; new HungrySingleton();</span><br><span class="line"></span><br><span class="line">    private HungrySingleton() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static HungrySingleton getInstance() &#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; æ–°å¢</span><br><span class="line">    private Object readResolve() &#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å†æ¬¡è¿è¡ŒApplicationçš„mainæ–¹æ³•åï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cc.mrbird.design.pattern.creational.singleton.HungrySingleton@7f31245a</span><br><span class="line">cc.mrbird.design.pattern.creational.singleton.HungrySingleton@7f31245a</span><br><span class="line">true</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æ–¹å¼æœ€ç»ˆååºåˆ—åŒ–å‡ºæ¥çš„å¯¹è±¡å’Œåºåˆ—åŒ–å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ä½†è¿™ç§æ–¹å¼ååºåˆ—åŒ–è¿‡ç¨‹å†…éƒ¨è¿˜æ˜¯ä¼šé‡æ–°åˆ›å»ºHungrySingletonå®ä¾‹ï¼Œåªä¸è¿‡å› ä¸ºHungrySingletonç±»å®šä¹‰äº†readResolveæ–¹æ³•ï¼ˆæ–¹æ³•å†…éƒ¨è¿”å›instanceå¼•ç”¨ï¼‰ï¼Œååºåˆ—åŒ–è¿‡ç¨‹ä¼šåˆ¤æ–­ç›®æ ‡ç±»æ˜¯å¦å®šä¹‰äº†readResolveè¯¥æ–¹æ³•ï¼Œæ˜¯çš„è¯åˆ™é€šè¿‡åå°„è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<h4 id="åå°„ç ´åå•ä¾‹æ¨¡å¼"><a href="#åå°„ç ´åå•ä¾‹æ¨¡å¼" class="headerlink" title="åå°„ç ´åå•ä¾‹æ¨¡å¼"></a>åå°„ç ´åå•ä¾‹æ¨¡å¼</h4><p>é™¤äº†åºåˆ—åŒ–èƒ½ç ´åå•ä¾‹å¤–ï¼Œåå°„ä¹Ÿå¯ä»¥ï¼Œä¸¾ä¸ªåå°„ç ´åHungrySingletonçš„ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        HungrySingleton instance &#x3D; HungrySingleton.getInstance();</span><br><span class="line">        &#x2F;&#x2F; åå°„åˆ›å»ºå®ä¾‹</span><br><span class="line">        Class&lt;HungrySingleton&gt; c &#x3D; HungrySingleton.class;</span><br><span class="line">        &#x2F;&#x2F; è·å–æ„é€ å™¨</span><br><span class="line">        Constructor&lt;HungrySingleton&gt; constructor &#x3D; c.getDeclaredConstructor();</span><br><span class="line">        &#x2F;&#x2F; æ‰“å¼€æ„é€ å™¨æƒé™</span><br><span class="line">        constructor.setAccessible(true);</span><br><span class="line">        HungrySingleton newInstance &#x3D; constructor.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(instance);</span><br><span class="line">        System.out.println(newInstance);</span><br><span class="line">        System.out.println(instance &#x3D;&#x3D; newInstance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cc.mrbird.design.pattern.creational.singleton.HungrySingleton@1b6d3586</span><br><span class="line">cc.mrbird.design.pattern.creational.singleton.HungrySingleton@4554617c</span><br><span class="line">false</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡åå°„ç ´åäº†ç§æœ‰æ„é€ å™¨æƒé™ï¼ŒæˆåŠŸåˆ›å»ºäº†æ–°çš„å®ä¾‹ã€‚</p>
<p>å¯¹äºè¿™ç§æƒ…å†µï¼Œé¥¿æ±‰æ¨¡å¼ä¸‹çš„ä¾‹å­å¯ä»¥åœ¨æ„é€ å™¨ä¸­æ·»åŠ åˆ¤æ–­é€»è¾‘æ¥é˜²å¾¡ï¼ˆæ‡’æ±‰æ¨¡å¼çš„å°±æ²¡æœ‰åŠæ³•äº†ï¼‰ï¼Œæ¯”å¦‚ä¿®æ”¹HungrySingletonçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class HungrySingleton &#123;</span><br><span class="line"></span><br><span class="line">    private final static HungrySingleton instance &#x3D; new HungrySingleton();</span><br><span class="line"></span><br><span class="line">    private HungrySingleton() &#123;</span><br><span class="line">        if (instance !&#x3D; null) &#123;</span><br><span class="line">            throw new RuntimeException(&quot;forbidden&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static HungrySingleton getInstance() &#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å†æ¬¡è¿è¡ŒApplicationçš„mainæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException</span><br><span class="line">    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)</span><br><span class="line">    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</span><br><span class="line">    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)</span><br><span class="line">    at cc.mrbird.design.pattern.creational.singleton.Application.main(Application.java:33)</span><br><span class="line">Caused by: java.lang.RuntimeException: forbidden</span><br><span class="line">    at cc.mrbird.design.pattern.creational.singleton.HungrySingleton.&lt;init&gt;(HungrySingleton.java:16)</span><br><span class="line">    ... 5 more</span><br></pre></td></tr></table></figure>


<h4 id="æšä¸¾å•ä¾‹æ¨¡å¼"><a href="#æšä¸¾å•ä¾‹æ¨¡å¼" class="headerlink" title="æšä¸¾å•ä¾‹æ¨¡å¼"></a>æšä¸¾å•ä¾‹æ¨¡å¼</h4><p>æšä¸¾å•ä¾‹æ¨¡å¼æ˜¯æ¨èçš„å•ä¾‹æ¨¡å¼ï¼Œå®ƒä¸ä»…å¯ä»¥é˜²å¾¡åºåˆ—åŒ–æ”»å‡»ï¼Œä¹Ÿå¯ä»¥é˜²å¾¡åå°„æ”»å‡»ã€‚ä¸¾ä¸ªæšä¸¾å•ä¾‹æ¨¡å¼çš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public enum EnumSingleton &#123;</span><br><span class="line"></span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    private Object data;</span><br><span class="line"></span><br><span class="line">    public Object getData() &#123;</span><br><span class="line">        return data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(Object data) &#123;</span><br><span class="line">        this.data &#x3D; data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static EnumSingleton getInstance()&#123;</span><br><span class="line">        return INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>éªŒè¯ä¸‹æ˜¯å¦æ˜¯å•ä¾‹çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        EnumSingleton instance &#x3D; EnumSingleton.getInstance();</span><br><span class="line">        instance.setData(new Object());</span><br><span class="line">        EnumSingleton newInstance &#x3D; EnumSingleton.getInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(instance);</span><br><span class="line">        System.out.println(newInstance);</span><br><span class="line">        System.out.println(instance.getData());</span><br><span class="line">        System.out.println(newInstance.getData());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTANCE</span><br><span class="line">INSTANCE</span><br><span class="line">java.lang.Object@1b6d3586</span><br><span class="line">java.lang.Object@1b6d3586</span><br></pre></td></tr></table></figure>


<p>æµ‹è¯•ä¸‹åºåˆ—åŒ–æ”»å‡»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        EnumSingleton instance &#x3D; EnumSingleton.getInstance();</span><br><span class="line">        instance.setData(new Object());</span><br><span class="line">        ObjectOutputStream outputStream &#x3D; new ObjectOutputStream(new FileOutputStream(&quot;file&quot;));</span><br><span class="line">        outputStream.writeObject(instance);</span><br><span class="line">       </span><br><span class="line">        ObjectInputStream inputStream &#x3D; new ObjectInputStream(new FileInputStream(&quot;file&quot;));</span><br><span class="line">        EnumSingleton newInstance &#x3D; (EnumSingleton) inputStream.readObject();</span><br><span class="line"></span><br><span class="line">        System.out.println(instance);</span><br><span class="line">        System.out.println(newInstance);</span><br><span class="line">        System.out.println(instance &#x3D;&#x3D; newInstance);</span><br><span class="line"></span><br><span class="line">        System.out.println(instance.getData());</span><br><span class="line">        System.out.println(newInstance.getData());</span><br><span class="line">        System.out.println(instance.getData() &#x3D;&#x3D; newInstance.getData());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSTANCE</span><br><span class="line">INSTANCE</span><br><span class="line">true</span><br><span class="line">java.lang.Object@568db2f2</span><br><span class="line">java.lang.Object@568db2f2</span><br><span class="line">true</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°åºåˆ—åŒ–å’Œååºåˆ—åŒ–åçš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªã€‚</p>
<p>åŸç†ï¼šè·Ÿè¸ªObjectInputStream#readObjectæºç ï¼Œå…¶ä¸­å½“åç¼–è¯‘å¯¹è±¡ä¸ºæšä¸¾ç±»å‹æ—¶ï¼Œå°†è°ƒç”¨readEnumæ–¹æ³•ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191217155448.png" alt="QQæˆªå›¾20191217155448.png"></p>
<p>nameä¸ºæšä¸¾ç±»é‡Œçš„æšä¸¾å¸¸é‡ï¼Œå¯¹äºçº¿ç¨‹æ¥è¯´å®ƒæ˜¯å”¯ä¸€çš„ï¼Œå­˜åœ¨æ–¹æ³•åŒºï¼Œæ‰€ä»¥é€šè¿‡<code>Enum.valueOf((Class)cl, name)</code>æ–¹æ³•å¾—åˆ°çš„æšä¸¾å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªã€‚</p>
<p>å†æµ‹è¯•ä¸€ä¸‹åå°„æ”»å‡»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        EnumSingleton instance &#x3D; EnumSingleton.getInstance();</span><br><span class="line"></span><br><span class="line">        Class&lt;EnumSingleton&gt; c &#x3D; EnumSingleton.class;</span><br><span class="line">        &#x2F;&#x2F; æšä¸¾ç±»åªåŒ…å«ä¸€ä¸ª(String,int)ç±»å‹æ„é€ å™¨</span><br><span class="line">        Constructor&lt;EnumSingleton&gt; constructor &#x3D; c.getDeclaredConstructor(String.class, int.class);</span><br><span class="line">        constructor.setAccessible(true);</span><br><span class="line">        EnumSingleton newInstance &#x3D; constructor.newInstance(&quot;hello&quot;, 1);</span><br><span class="line"></span><br><span class="line">        System.out.println(instance &#x3D;&#x3D; newInstance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¿è¡Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Cannot reflectively create enum objects</span><br><span class="line">    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)</span><br><span class="line">    at cc.mrbird.design.pattern.creational.singleton.Application.main(Application.java:71)</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°æŠ›å¼‚å¸¸äº†ï¼ŒæŸ¥çœ‹Constructorç±»çš„417è¡Œä»£ç å¯ä»¥å‘ç°åŸå› ï¼š<img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191217160647.png" alt="QQæˆªå›¾20191217160647.png"></p>
<p>Javaç¦æ­¢é€šè¿‡åå°„åˆ›å»ºæšä¸¾å¯¹è±¡ã€‚</p>
<p>æ­£æ˜¯å› ä¸ºæšä¸¾ç±»å‹æ‹¥æœ‰è¿™äº›å¤©ç„¶çš„ä¼˜åŠ¿ï¼Œæ‰€ä»¥ç”¨å®ƒåˆ›å»ºå•ä¾‹æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œè¿™ä¹Ÿæ˜¯Effective Javaæ¨èçš„æ–¹å¼ã€‚</p>
<h3 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h3><p>åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œé€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>ç±»åˆå§‹åŒ–æ¶ˆè€—è¾ƒå¤šèµ„æºï¼›</li>
<li>å¾ªç¯ä½“ä¸­ç”Ÿäº§å¤§é‡å¯¹è±¡çš„æ—¶å€™ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>åŸå‹æ¨¡å¼æ€§èƒ½æ¯”ç›´æ¥newä¸€ä¸ªå¯¹è±¡æ€§èƒ½å¥½ï¼›</li>
<li>ç®€åŒ–åˆ›å»ºå¯¹è±¡è¿‡ç¨‹ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>å¯¹è±¡å¿…é¡»é‡å†™Objectå…‹éš†æ–¹æ³•ï¼›</li>
<li>å¤æ‚å¯¹è±¡çš„å…‹éš†æ–¹æ³•å†™èµ·æ¥è¾ƒéº»çƒ¦ï¼ˆæ·±å…‹éš†ã€æµ…å…‹éš†ï¼‰</li>
</ol>
<p>ä¸¾ä¾‹ï¼šæ–°å»ºä¸€ä¸ªå­¦ç”Ÿç±»Studentï¼Œå®ç°å…‹éš†æ¥å£ï¼Œå¹¶é‡å†™Objectçš„å…‹éš†æ–¹æ³•ï¼ˆå› ä¸ºéƒ½æ˜¯ç®€å•å±æ€§ï¼Œæ‰€ä»¥æµ…å…‹éš†å³å¯ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class Student implements Cloneable &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Student&#123;&quot; +</span><br><span class="line">                &quot;name&#x3D;&#39;&quot; + name + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, age&#x3D;&quot; + age +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected Object clone() throws CloneNotSupportedException &#123;</span><br><span class="line">        return super.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åœ¨Applicationä¸­æµ‹è¯•ä¸€æ³¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws CloneNotSupportedException &#123;</span><br><span class="line">        Student student &#x3D; new Student();</span><br><span class="line">        ArrayList&lt;Student&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        for (int i &#x3D; 0; i &lt; 3; i++) &#123;</span><br><span class="line">            Student s &#x3D; (Student) student.clone();</span><br><span class="line">            s.setName(&quot;å­¦ç”Ÿ&quot; + i);</span><br><span class="line">            s.setAge(20 + i);</span><br><span class="line">            list.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Student&#123;name&#x3D;&#39;å­¦ç”Ÿ0&#39;, age&#x3D;20&#125;, Student&#123;name&#x3D;&#39;å­¦ç”Ÿ1&#39;, age&#x3D;21&#125;, Student&#123;name&#x3D;&#39;å­¦ç”Ÿ2&#39;, age&#x3D;22&#125;]</span><br></pre></td></tr></table></figure>


<p>è¿™ç§æ–¹å¼ä¼šæ¯”ç›´æ¥åœ¨å¾ªç¯ä¸­åˆ›å»ºStudentæ€§èƒ½å¥½ã€‚</p>
<p>å½“å¯¹è±¡åŒ…å«å¼•ç”¨ç±»å‹å±æ€§æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ·±å…‹éš†ï¼Œæ¯”å¦‚StudentåŒ…å«Dateå±æ€§æ—¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">public class Student implements Cloneable &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    private Date birthday;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Date getBirthday() &#123;</span><br><span class="line">        return birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBirthday(Date birthday) &#123;</span><br><span class="line">        this.birthday &#x3D; birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Student&#123;&quot; +</span><br><span class="line">                &quot;name&#x3D;&#39;&quot; + name + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, age&#x3D;&quot; + age +</span><br><span class="line">                &quot;, birthday&#x3D;&quot; + birthday +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected Object clone() throws CloneNotSupportedException &#123;</span><br><span class="line">        Student student &#x3D; (Student) super.clone();</span><br><span class="line">        &#x2F;&#x2F; å¼•ç”¨ç±»å‹æ·±å…‹éš†</span><br><span class="line">        Date birthday &#x3D; (Date) student.getBirthday().clone();</span><br><span class="line">        student.setBirthday(birthday);</span><br><span class="line">        return student;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå…‹éš†ä¼šç ´åå®ç°äº†Cloneableæ¥å£çš„å•ä¾‹å¯¹è±¡ã€‚</p>
<h2 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h2><h3 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h3><p>å¤–è§‚æ¨¡å¼åˆå«é—¨é¢æ¨¡å¼ï¼Œæä¾›äº†ç»Ÿä¸€å¾—æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>å­ç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œå¢åŠ å¤–è§‚æ¨¡å¼æä¾›ç®€å•æ¥å£è°ƒç”¨ï¼›</li>
<li>æ„å»ºå¤šå±‚ç³»ç»Ÿç»“æ„ï¼Œåˆ©ç”¨å¤–è§‚å¯¹è±¡ä½œä¸ºæ¯å±‚çš„å…¥å£ï¼Œç®€åŒ–å±‚é—´è°ƒç”¨ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>ç®€åŒ–äº†è°ƒç”¨è¿‡ç¨‹ï¼Œæ— éœ€äº†è§£æ·±å…¥å­ç³»ç»Ÿï¼›</li>
<li>å‡ä½è€¦åˆåº¦ï¼›</li>
<li>æ›´å¥½çš„å±‚æ¬¡åˆ’åˆ†ï¼›</li>
<li>ç¬¦åˆè¿ªç±³ç‰¹æ³•åˆ™ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>å¢åŠ å­ç³»ç»Ÿï¼Œæ‹“å±•å­ç³»ç»Ÿè¡Œä¸ºå®¹æ˜“å¼•å…¥é£é™©ï¼›</li>
<li>ä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
</ol>
<p>ä¸¾ä¸ªè®¢å¤–å–çš„ä¾‹å­ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªå¤–å–å®ä½“ç±»Takeawayï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Takeaway &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è®¢å¤–å–è¿‡ç¨‹ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šä¸‹å•ã€æ”¯ä»˜å’Œé…é€ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸‰ä¸ªServiceå¯¹åº”è¿™ä¸‰ä¸ªè¿‡ç¨‹ã€‚æ–°å»ºä¸‹å•æœåŠ¡OrderServiceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class OrderService &#123;</span><br><span class="line"></span><br><span class="line">    public boolean placeAnOrder(Takeaway takeaway) &#123;</span><br><span class="line">        System.out.println(takeaway.getName() + &quot;ä¸‹å•æˆåŠŸ&quot;);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºæ”¯ä»˜æœåŠ¡PayServiceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class PayService &#123;</span><br><span class="line"></span><br><span class="line">    public boolean pay(Takeaway takeaway) &#123;</span><br><span class="line">        System.out.println(&quot;å•†å“&quot; + takeaway.getName() + &quot;æ”¯ä»˜æˆåŠŸ&quot;);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºé…é€æœåŠ¡DeliveryServiceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class DeliveryService &#123;</span><br><span class="line"></span><br><span class="line">    public void delivery(Takeaway takeaway) &#123;</span><br><span class="line">        System.out.println(takeaway.getName() + &quot;å·²ç”±éª‘æ‰‹XXæ¥å•ï¼Œè®¢å•æ´¾é€ä¸­&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŸºäºå¤–è§‚æ¨¡å¼æ³•åˆ™ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªServiceæ¥èšåˆè¿™ä¸‰ä¸ªæœåŠ¡ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å’Œè¿™ä¸ªServiceäº¤äº’å³å¯ã€‚æ–°å»ºå¤–å–æœåŠ¡TakeawayServiceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class TakeawayService &#123;</span><br><span class="line"></span><br><span class="line">    private OrderService orderService &#x3D; new OrderService();</span><br><span class="line">    private PayService payService &#x3D; new PayService();</span><br><span class="line">    private DeliveryService deliveryService &#x3D; new DeliveryService();</span><br><span class="line"></span><br><span class="line">    public void takeOrder(Takeaway takeaway) &#123;</span><br><span class="line">        if (orderService.placeAnOrder(takeaway)) &#123;</span><br><span class="line">            if (payService.pay(takeaway)) &#123;</span><br><span class="line">                deliveryService.delivery(takeaway);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºä¸ªå®¢æˆ·ç«¯æµ‹è¯•ä¸€æ³¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Takeaway takeaway &#x3D; new Takeaway();</span><br><span class="line">        takeaway.setName(&quot;æ³¡æ¤’ğŸ¸&quot;);</span><br><span class="line"></span><br><span class="line">        TakeawayService takeawayService &#x3D; new TakeawayService();</span><br><span class="line">        takeawayService.takeOrder(takeaway);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯åªéœ€è¦è°ƒç”¨TakeawayServiceå³å¯ï¼Œæ— éœ€å…³ç³»å†…éƒ¨å…·ä½“ç»å†äº†å¤šå°‘ä¸ªæ­¥éª¤ï¼Œè¿è¡Œmainæ–¹æ³•è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ³¡æ¤’ğŸ¸ä¸‹å•æˆåŠŸ</span><br><span class="line">å•†å“æ³¡æ¤’ğŸ¸æ”¯ä»˜æˆåŠŸ</span><br><span class="line">æ³¡æ¤’ğŸ¸å·²ç”±éª‘æ‰‹XXæ¥å•ï¼Œè®¢å•æ´¾é€ä¸­</span><br></pre></td></tr></table></figure>


<p>è¯¥ä¾‹å­çš„UMLå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191218151629.png" alt="QQæˆªå›¾20191218151629.png"></p>
<h3 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h3><p>åœ¨ä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¹‹ä¸Šï¼Œå°†åŠŸèƒ½é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œæä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>æ‹“å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼›</li>
<li>åŠ¨æ€ç»™å¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œå¹¶ä¸”åŠ¨æ€æ’¤é”€ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>ç»§æ‰¿çš„æœ‰åŠ›è¡¥å……ï¼Œä¸æ”¹å˜åŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹ç»™å¯¹è±¡æ‹“å±•åŠŸèƒ½ï¼›</li>
<li>é€šè¿‡ä½¿ç”¨ä¸åŒçš„è£…é¥°ç±»ã€ä¸åŒçš„ç»„åˆæ–¹å¼ï¼Œå®ç°ä¸åŒçš„æ•ˆæœã€‚</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>å¢åŠ ç¨‹åºå¤æ‚æ€§ï¼›</li>
</ol>
<p>ä¸¾ä¸ªæ°´æœæ²™æ‹‰çš„ä¾‹å­ã€‚</p>
<p>æ¯”å¦‚åœ¨ç‚¹æ°´æœæ²™æ‹‰å¤–å–æ—¶ï¼Œå¯ä»¥å¾€æ°´æœæ²™æ‹‰é‡ŒåŠ å„ç§æ°´æœï¼Œä»·æ ¼ä¹Ÿä¼šç›¸åº”çš„è°ƒæ•´ï¼Œè¦è®©ç¨‹åºæ”¯æŒä¸åŒæ°´æœè‡ªç”±ç»„åˆï¼Œå¹¶è®¡ç®—ç›¸åº”çš„ä»·æ ¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è£…é¥°è€…æ¨¡å¼æ¥å®Œæˆã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„æ°´æœæ²™æ‹‰ç±»AbstractFruitSaladï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractFruitSalad &#123;</span><br><span class="line">    public abstract String remark();</span><br><span class="line">    public abstract int price();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŒ…å«å¤‡æ³¨å’Œä»·æ ¼æŠ½è±¡æ–¹æ³•ã€‚</p>
<p>æ¥ç€åˆ›å»ºä¸€ä¸ªæŠ½è±¡çš„è£…é¥°å™¨AbstractDecoratorï¼ˆå…³é”®ç‚¹ï¼Œç»§æ‰¿æŠ½è±¡æ°´æœæ²™æ‹‰ç±»ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class AbstractDecorator extends AbstractFruitSalad&#123;</span><br><span class="line"></span><br><span class="line">    private AbstractFruitSalad fruitSalad;</span><br><span class="line"></span><br><span class="line">    public AbstractDecorator(AbstractFruitSalad fruitSalad)&#123;</span><br><span class="line">        this.fruitSalad &#x3D; fruitSalad;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String remark() &#123;</span><br><span class="line">        return fruitSalad.remark();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int price() &#123;</span><br><span class="line">        return fruitSalad.price();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åˆ›å»ºå…·ä½“çš„æ°´æœæ²™æ‹‰ç±»FruitSaladï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class FruitSalad extends AbstractFruitSalad&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String remark() &#123;</span><br><span class="line">        return &quot;æ°´æœğŸ¥—ï¼ˆæ ‡å‡†ï¼‰\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int price() &#123;</span><br><span class="line">        return 9;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¯¥æ²™æ‹‰æ˜¯æ ‡å‡†çš„æ°´æœæ²™æ‹‰ï¼Œä»·æ ¼æ˜¯9å…ƒã€‚</p>
<p>å¦‚æœæˆ‘ä»¬çš„æ°´æœæ²™æ‹‰è¿˜å…è®¸å®¢æˆ·æ·»åŠ çŒ•çŒ´æ¡ƒå’Œè¥¿ç“œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸¤ä¸ªæ–°çš„è£…é¥°å™¨ã€‚æ·»åŠ çŒ•çŒ´æ¡ƒè£…é¥°å™¨KiwiDecoratorï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class KiwiDecorator extends AbstractDecorator &#123;</span><br><span class="line"></span><br><span class="line">    public KiwiDecorator(AbstractFruitSalad fruitSalad) &#123;</span><br><span class="line">        super(fruitSalad);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String remark() &#123;</span><br><span class="line">        return super.remark() + &quot;åŠ ä»½ğŸ¥åˆ‡\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int price() &#123;</span><br><span class="line">        return super.price() + 2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼ŒåŠ ä¸€ä»½çŒ•çŒ´æ¡ƒéœ€è¦åœ¨åŸæœ‰åŸºç¡€ä¸ŠåŠ 2å…ƒã€‚</p>
<p>æ¥ç€ç»§ç»­åˆ›å»ºè¥¿ç“œè£…é¥°å™¨WaterMelonDecoratorï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class WaterMelonDecorator extends AbstractDecorator &#123;</span><br><span class="line"></span><br><span class="line">    public WaterMelonDecorator(AbstractFruitSalad fruitSalad) &#123;</span><br><span class="line">        super(fruitSalad);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String remark() &#123;</span><br><span class="line">        return super.remark() + &quot;åŠ ä»½ğŸ‰åˆ‡\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int price() &#123;</span><br><span class="line">        return super.price() + 3;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æœ€ååˆ›å»ºå®¢æˆ·ç«¯Applicationæµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; ç‚¹äº†ä»½æ°´æœæ²™æ‹‰ï¼Œå¹¶åŠ äº†ä¸¤ä»½ğŸ¥å’Œä¸€ä»½ğŸ‰ï¼Œçœ‹çœ‹æœ€ç»ˆä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="line">        AbstractFruitSalad fruitSalad &#x3D; new FruitSalad();</span><br><span class="line">        fruitSalad &#x3D; new KiwiDecorator(fruitSalad);</span><br><span class="line">        fruitSalad &#x3D; new KiwiDecorator(fruitSalad);</span><br><span class="line">        fruitSalad &#x3D; new WaterMelonDecorator(fruitSalad);</span><br><span class="line"></span><br><span class="line">        System.out.println(fruitSalad.remark() + &quot;ä»·æ ¼æ˜¯ï¼š&quot; + fruitSalad.price());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä¸Šé¢çš„å†™æ³•ä¹Ÿå¯ä»¥æ”¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; ç‚¹äº†ä»½æ°´æœæ²™æ‹‰ï¼Œå¹¶åŠ äº†ä¸¤ä»½ğŸ¥å’Œä¸€ä»½ğŸ‰ï¼Œçœ‹çœ‹æœ€ç»ˆä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="line">        AbstractFruitSalad fruitSalad &#x3D; new FruitSalad();</span><br><span class="line">        fruitSalad &#x3D; new WaterMelonDecorator(new KiwiDecorator(new KiwiDecorator(fruitSalad)));</span><br><span class="line"></span><br><span class="line">        System.out.println(fruitSalad.remark() + &quot;ä»·æ ¼æ˜¯ï¼š&quot; + fruitSalad.price());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç¨‹åºè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ°´æœğŸ¥—ï¼ˆæ ‡å‡†ï¼‰</span><br><span class="line">åŠ ä»½ğŸ¥åˆ‡</span><br><span class="line">åŠ ä»½ğŸ¥åˆ‡</span><br><span class="line">åŠ ä»½ğŸ‰åˆ‡</span><br><span class="line">ä»·æ ¼æ˜¯ï¼š16</span><br></pre></td></tr></table></figure>


<p>é€šè¿‡ä¸åŒçš„è£…é¥°å™¨è‡ªç”±ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»çš„ç»„è£…å‡ºå„å¼å„æ ·çš„æ°´æœæ²™æ‹‰ï¼Œè¿™æ­£æ˜¯è£…é¥°è€…æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œä½†æ˜æ˜¾å¯ä»¥çœ‹å‡ºä»£ç å˜å¤æ‚äº†ã€‚</p>
<p>è¿™ä¸ªä¾‹å­çš„UMLå›¾å¦‚ä¸‹æ‰€ç¤º:</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191218172739.png" alt="QQæˆªå›¾20191218172739.png"></p>
<h3 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h3><p>å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºæœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿åŸæœ¬ä¸å…¼å®¹çš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>å·²å­˜åœ¨çš„ç±»ï¼Œå®ƒçš„æ–¹æ³•å’Œéœ€æ±‚ä¸åŒ¹é…æ—¶ï¼ˆæ–¹æ³•ç»“æœç›¸åŒæˆ–è€…ç›¸ä¼¼ï¼‰</li>
</ol>
<p>ä¼˜ç‚¹:</p>
<ol>
<li>æé«˜ç±»çš„é€æ˜æ€§å’Œå¤ç”¨ï¼Œç°æœ‰çš„ç±»å¤ç”¨ä½†ä¸éœ€æ”¹å˜ï¼›</li>
<li>ç›®æ ‡ç±»å’Œé€‚é…å™¨ç±»è§£è€¦ï¼Œæé«˜ç¨‹åºæ‹“å±•æ€§ï¼›</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>é€‚é…å™¨ç¼–å†™è¿‡ç¨‹éœ€è¦å…¨é¢è€ƒè™‘ï¼Œå¯èƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ï¼›</li>
<li>é™ä½ä»£ç å¯è¯»æ€§ã€‚</li>
</ol>
<p>åˆ†ä¸ºï¼šç±»é€‚é…å™¨æ¨¡å¼å’Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼ã€‚</p>
<p>å…ˆä¸¾ä¸ªç±»é€‚é…å™¨æ¨¡å¼çš„ä¾‹å­ï¼š</p>
<p>å‡å¦‚é¡¹ç›®é‡ŒåŸæœ‰ä¸€æ¡æ°´æœçš„äº§å“çº¿ï¼Œæ¯”å¦‚åŒ…å«ä¸€ä¸ªæ ‘è“ç±»Raspberryï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Raspberry &#123;</span><br><span class="line"></span><br><span class="line">    public void addRaspberry() &#123;</span><br><span class="line">        System.out.println(&quot;æ·»åŠ ç‚¹æ ‘è“&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>éšç€é¡¹ç›®çš„æ‹“å±•ï¼Œç°åœ¨æ–°å¢äº†æ°´æœæ´¾äº§å“çº¿ï¼Œæ–°å»ºPieæ¥å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Pie &#123;</span><br><span class="line"></span><br><span class="line">    void make();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¦å°†RaspberryåŠ å…¥åˆ°Pieäº§å“çº¿ï¼Œåˆä¸æƒ³ä¿®æ”¹Raspberryç±»çš„ä»£ç ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªé€‚é…å™¨RaspberryPieAdaptorï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class RaspberryPieAdaptor extends Raspberry implements Pie&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void make() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œä¸€ä¸ªæ´¾ğŸ¥§&quot;);</span><br><span class="line">        super.addRaspberry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>é€‚é…å™¨ç»§æ‰¿è¢«é€‚é…çš„ç±»ï¼Œå®ç°æ–°çš„äº§å“çº¿æ¥å£ã€‚</p>
<p>åœ¨Applicationé‡Œæµ‹è¯•ä¸€æ³¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Pie pie &#x3D; new RaspberryPieAdaptor();</span><br><span class="line">        pie.make();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆ¶ä½œä¸€ä¸ªæ´¾ğŸ¥§</span><br><span class="line">æ·»åŠ ç‚¹æ ‘è“</span><br></pre></td></tr></table></figure>


<p>æˆåŠŸé€šè¿‡é€‚é…å™¨åˆ¶é€ äº†æ ‘è“æ´¾ã€‚ç±»é€‚é…å™¨æ¨¡å¼çš„UMLå›¾å¾ˆç®€å•ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191219105058.png" alt="QQæˆªå›¾20191219105058.png"></p>
<p>å¯¹è±¡é€‚é…å™¨æ¨¡å¼åªéœ€è¦å°†RaspberryPieAdaptorä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class RaspberryPieAdaptor implements Pie&#123;</span><br><span class="line"></span><br><span class="line">    private Raspberry raspberry &#x3D; new Raspberry();</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void make() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œä¸€ä¸ªæ´¾ğŸ¥§&quot;);</span><br><span class="line">        raspberry.addRaspberry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¿™ç§æ¨¡å¼ä¸ç›´æ¥ç»§æ‰¿è¢«é€‚é…è€…ï¼Œè€Œæ˜¯åœ¨é€‚é…å™¨é‡Œåˆ›å»ºè¢«é€‚é…è€…ã€‚è¿™ç§æ¨¡å¼çš„UMLå›¾ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191219110730.png" alt="QQæˆªå›¾20191219110730.png"></p>
<h3 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h3><p>æä¾›äº†å‡å°‘å¯¹è±¡æ•°é‡ä»è€Œæ”¹å–„åº”ç”¨æ‰€éœ€çš„å¯¹è±¡ç»“æ„çš„æ–¹å¼ï¼Œè¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>åº•å±‚ç³»ç»Ÿå¼€å‘ï¼Œè§£å†³æ€§èƒ½é—®é¢˜ï¼›</li>
<li>ç³»ç»Ÿæ‹¥æœ‰å¤§é‡ç›¸ä¼¼å¯¹è±¡ï¼Œéœ€è¦ç¼“å†²æ± çš„åœºæ™¯ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å‡å°‘å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½å†…å­˜å ç”¨ï¼›</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>å…³æ³¨å†…/å¤–éƒ¨çŠ¶æ€ï¼Œå…³æ³¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›</li>
<li>ç¨‹åºçš„é€»è¾‘å¤æ‚åŒ–ã€‚</li>
</ol>
<p>å†…éƒ¨çŠ¶æ€ï¼šç®€å•ç†è§£ä¸ºäº«å…ƒå¯¹è±¡çš„å±æ€§çŠ¶æ€ï¼Œä¸ä¼šå› ä¸ºå¤–éƒ¨çš„æ”¹å˜è€Œæ”¹å˜ï¼› å¤–éƒ¨çŠ¶æ€ï¼šç®€å•ç†è§£ä¸ºæ–¹æ³•å‚æ•°ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ–°å»ºæ´¾ğŸ¥§æ¥å£Pieï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Pie &#123;</span><br><span class="line"></span><br><span class="line">    void make() throws InterruptedException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å…¶å®ç°ç±»æ°´æœæ´¾FruitPieï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class FruitPie implements Pie &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private LocalDateTime productTime;</span><br><span class="line"></span><br><span class="line">    public FruitPie(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setProductTime(LocalDateTime productTime) &#123;</span><br><span class="line">        this.productTime &#x3D; productTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void make() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(100);</span><br><span class="line">            System.out.println(name + &quot;ç”Ÿäº§æ—¶é—´ï¼š&quot; + this.productTime);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŒ…å«åç§°å’Œç”Ÿäº§æ—¥æœŸå±æ€§ï¼Œå¹¶ä¸”æœ‰ä¸ªmakeæ–¹æ³•ã€‚</p>
<p>æ¥ç€åˆ›å»ºç”Ÿäº§FruitPieçš„å·¥å‚FruitPieFactoryï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class FruitPieFactory &#123;</span><br><span class="line"></span><br><span class="line">    private static final HashMap&lt;String, FruitPie&gt; PIE_HASH_MAP &#x3D; new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public static FruitPie produce(String name) &#123;</span><br><span class="line">        FruitPie fruitPie &#x3D; PIE_HASH_MAP.get(name);</span><br><span class="line">        if (fruitPie &#x3D;&#x3D; null) &#123;</span><br><span class="line">            System.out.println(&quot;æ²¡æœ‰&quot; + name + &quot;åˆ¶ä½œæ–¹æ³•ï¼Œå­¦ä¹ åˆ¶ä½œ...&quot;);</span><br><span class="line">            fruitPie &#x3D; new FruitPie(name);</span><br><span class="line">            PIE_HASH_MAP.put(name, fruitPie);</span><br><span class="line">        &#125;</span><br><span class="line">        return fruitPie;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä»£ç å…³é”®æ˜¯é€šè¿‡HashMapå­˜å‚¨å¯¹è±¡ã€‚</p>
<p>ç¼–å†™ä¸ªæµ‹è¯•ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    private static final String[] PIE &#x3D; &#123;&quot;ğŸ‡æ´¾&quot;, &quot;ğŸˆæ´¾&quot;, &quot;ğŸ“æ´¾&quot;, &quot;ğŸ’æ´¾&quot;&#125;;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        IntStream.range(0, 10).forEach((i) -&gt; &#123;</span><br><span class="line">            String name &#x3D; PIE[(int) (Math.random() * PIE.length)];</span><br><span class="line">            FruitPie fruitPie &#x3D; FruitPieFactory.produce(name);</span><br><span class="line">            fruitPie.setProductTime(LocalDateTime.now());</span><br><span class="line">            fruitPie.make();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ²¡æœ‰ğŸ“æ´¾åˆ¶ä½œæ–¹æ³•ï¼Œå­¦ä¹ åˆ¶ä½œ...</span><br><span class="line">ğŸ“æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:26.397</span><br><span class="line">æ²¡æœ‰ğŸ‡æ´¾åˆ¶ä½œæ–¹æ³•ï¼Œå­¦ä¹ åˆ¶ä½œ...</span><br><span class="line">ğŸ‡æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:26.498</span><br><span class="line">ğŸ‡æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:26.599</span><br><span class="line">æ²¡æœ‰ğŸ’æ´¾åˆ¶ä½œæ–¹æ³•ï¼Œå­¦ä¹ åˆ¶ä½œ...</span><br><span class="line">ğŸ’æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:26.700</span><br><span class="line">ğŸ’æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:26.800</span><br><span class="line">ğŸ’æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:26.901</span><br><span class="line">æ²¡æœ‰ğŸˆæ´¾åˆ¶ä½œæ–¹æ³•ï¼Œå­¦ä¹ åˆ¶ä½œ...</span><br><span class="line">ğŸˆæ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:27.002</span><br><span class="line">ğŸ“æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:27.103</span><br><span class="line">ğŸ‡æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:27.203</span><br><span class="line">ğŸ‡æ´¾ç”Ÿäº§æ—¶é—´ï¼š2019-12-19T16:13:27.304</span><br></pre></td></tr></table></figure>


<p>ä»ç»“æœçœ‹ï¼Œåœ¨10æ¬¡å¾ªç¯ä¸­ï¼Œåªç”Ÿäº§äº†4ä¸ªå¯¹è±¡ï¼Œè¿™å¾ˆå¥½çš„æè¿°äº†ç³»ç»Ÿæœ‰å¤§é‡ç›¸ä¼¼å¯¹è±¡ï¼Œéœ€è¦ç¼“å†²æ± çš„åœºæ™¯ã€‚</p>
<p>JDKä¸­çš„å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œæ•°æ®åº“è¿æ¥æ± ç­‰éƒ½æ˜¯ç”¨çš„äº«å…ƒæ¨¡å¼ã€‚</p>
<h3 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h3><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å®¢æˆ·ç«¯å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ä¿æŒä¸€è‡´çš„æ–¹å¼å¤„ç†ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯å¯ä»¥å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„å·®å¼‚ï¼›</li>
<li>å¤„ç†æ ‘å½¢ç»“æ„æ•°æ®ã€‚</li>
</ol>
<p>ä¼˜ç‚¹:</p>
<ol>
<li>å±‚æ¬¡æ¸…æ™°ï¼›</li>
<li>å®¢æˆ·ç«¯ä¸å¿…å…³ç³»å±‚æ¬¡å·®å¼‚ï¼Œæ–¹ä¾¿æ§åˆ¶ï¼›</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æ ‘å½¢å¤„ç†è¾ƒä¸ºå¤æ‚ã€‚</li>
</ol>
<p>ä¸¾ä¸ªèœå•æŒ‰é’®ç»„æˆçš„æ ‘å½¢ä¾‹å­ã€‚</p>
<p>æ–°å»ºèœå•æŒ‰é’®çš„ç»„åˆæŠ½è±¡ç±»AbstractMenuButtonï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractMenuButton &#123;</span><br><span class="line"></span><br><span class="line">    public void add(AbstractMenuButton abstractMenuButton) &#123;</span><br><span class="line">        throw new UnsupportedOperationException(&quot;ä¸æ”¯æŒåˆ›å»ºæ“ä½œ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        throw new UnsupportedOperationException(&quot;ä¸æ”¯æŒåç§°è·å–&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getType() &#123;</span><br><span class="line">        throw new UnsupportedOperationException(&quot;ä¸æ”¯æŒç±»å‹è·å–&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getIcon() &#123;</span><br><span class="line">        throw new UnsupportedOperationException(&quot;ä¸æ”¯æŒå›¾æ ‡&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void print() &#123;</span><br><span class="line">        throw new UnsupportedOperationException(&quot;ä¸æ”¯æŒæ‰“å°æ“ä½œ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç»„åˆäº†èœå•æŒ‰é’®æ“ä½œçš„åŸºæœ¬æ–¹æ³•ã€‚</p>
<p>æ–°å¢æŒ‰é’®ç±»Buttonï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Button extends AbstractMenuButton &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public Button(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return this.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getType() &#123;</span><br><span class="line">        return &quot;æŒ‰é’®&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void print() &#123;</span><br><span class="line">        System.out.println(getName() + &quot;ã€&quot; + getType() + &quot;ã€‘&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æŒ‰é’®æ‹¥æœ‰åç§°å±æ€§ï¼Œå¹¶ä¸”æ”¯æŒåç§°è·å–ï¼Œç±»å‹è·å–å’Œæ‰“å°æ–¹æ³•ï¼Œæ‰€ä»¥é‡å†™äº†è¿™ä¸‰ä¸ªçˆ¶ç±»æ–¹æ³•ã€‚</p>
<p>æ¥ç€æ–°å»ºèœå•ç±»Menuï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public class Menu extends AbstractMenuButton &#123;</span><br><span class="line"></span><br><span class="line">    private List&lt;AbstractMenuButton&gt; items &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">    private String name;</span><br><span class="line">    private String icon;</span><br><span class="line">    private Integer level;</span><br><span class="line"></span><br><span class="line">    public Menu(String name, String icon, Integer level) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.icon &#x3D; icon;</span><br><span class="line">        this.level &#x3D; level;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void add(AbstractMenuButton abstractMenuButton) &#123;</span><br><span class="line">        items.add(abstractMenuButton);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return this.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getType() &#123;</span><br><span class="line">        return &quot;èœå•&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getIcon() &#123;</span><br><span class="line">        return this.icon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void print() &#123;</span><br><span class="line">        System.out.println(getIcon() + getName() + &quot;ã€&quot; + getType() + &quot;ã€‘&quot;);</span><br><span class="line">        for (AbstractMenuButton item : items) &#123;</span><br><span class="line">            if (this.level !&#x3D; null) &#123;</span><br><span class="line">                for (int i &#x3D; 0; i &lt; this.level; i++) &#123;</span><br><span class="line">                    System.out.print(&quot;    &quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            item.print();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>èœå•åŒ…å«åç§°ã€å›¾æ ‡å’Œå±‚çº§å±æ€§ï¼Œå¹¶ä¸”èœå•å¯ä»¥åŒ…å«ä¸‹çº§ï¼ˆæ¯”å¦‚ä¸‹çº§èœå•ï¼Œä¸‹çº§æŒ‰é’®ï¼‰ï¼Œæ‰€ä»¥å®ƒåŒ…å«ä¸€ä¸ªListç±»å‹çš„å±æ€§itemsã€‚</p>
<p>æ­¤å¤–ï¼Œèœå•åŒ…å«æ·»åŠ ä¸‹çº§ã€åç§°è·å–ã€ç±»å‹è·å–ã€å›¾æ ‡è·å–å’Œæ‰“å°æ–¹æ³•ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œæµ‹è¯•èœå•æŒ‰é’®çš„å±‚çº§ç»“æ„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Menu userMenu &#x3D; new Menu(&quot;ç”¨æˆ·ç®¡ç†&quot;, &quot;ğŸ§‘&quot;, 2);</span><br><span class="line">        Button createUser &#x3D; new Button(&quot;æ–°å¢ç”¨æˆ·&quot;);</span><br><span class="line">        Button updateUser &#x3D; new Button(&quot;ä¿®æ”¹ç”¨æˆ·&quot;);</span><br><span class="line">        Button deleteUser &#x3D; new Button(&quot;åˆ é™¤ç”¨æˆ·&quot;);</span><br><span class="line">        userMenu.add(createUser);</span><br><span class="line">        userMenu.add(updateUser);</span><br><span class="line">        userMenu.add(deleteUser);</span><br><span class="line"></span><br><span class="line">        Menu logMenu &#x3D; new Menu(&quot;æ“ä½œæ—¥å¿—&quot;, &quot;ğŸ“ƒ&quot;, 2);</span><br><span class="line">        Button export &#x3D; new Button(&quot;å¯¼å‡ºExcel&quot;);</span><br><span class="line">        logMenu.add(export);</span><br><span class="line"></span><br><span class="line">        Menu systemMenu &#x3D; new Menu(&quot;ç³»ç»Ÿç®¡ç†&quot;, &quot;ğŸ”¨&quot;, 1);</span><br><span class="line">        systemMenu.add(userMenu);</span><br><span class="line">        systemMenu.add(logMenu);</span><br><span class="line"></span><br><span class="line">        systemMenu.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ‰“å°è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ğŸ”¨ç³»ç»Ÿç®¡ç†ã€èœå•ã€‘</span><br><span class="line">    ğŸ§‘ç”¨æˆ·ç®¡ç†ã€èœå•ã€‘</span><br><span class="line">        æ–°å¢ç”¨æˆ·ã€æŒ‰é’®ã€‘</span><br><span class="line">        ä¿®æ”¹ç”¨æˆ·ã€æŒ‰é’®ã€‘</span><br><span class="line">        åˆ é™¤ç”¨æˆ·ã€æŒ‰é’®ã€‘</span><br><span class="line">    ğŸ“ƒæ“ä½œæ—¥å¿—ã€èœå•ã€‘</span><br><span class="line">        å¯¼å‡ºExcelã€æŒ‰é’®ã€‘</span><br></pre></td></tr></table></figure>


<p>UMLå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191219190427.png" alt="QQæˆªå›¾20191219190427.png"></p>
<h3 id="æ¡¥æ¥æ¨¡å¼"><a href="#æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ¡¥æ¥æ¨¡å¼"></a>æ¡¥æ¥æ¨¡å¼</h3><p>å°†æŠ½è±¡éƒ¨åˆ†å’Œå…·ä½“å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚é€šè¿‡ç»„åˆçš„æ–¹å¼å»ºç«‹ä¸¤ä¸ªç±»ä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>æŠ½è±¡å’Œå®ä½“å®ç°ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§ï¼›</li>
<li>ä¸€ä¸ªç±»å­˜åœ¨å¤šä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå¹¶ä¸”éœ€è¦ç‹¬ç«‹æ‹“å±•ï¼›</li>
<li>ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>åˆ†ç¦»æŠ½è±¡éƒ¨åˆ†å’Œå…·ä½“å®ç°éƒ¨åˆ†ï¼›</li>
<li>æé«˜äº†ç³»ç»Ÿå¯æ‹“å±•æ€§ï¼›</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™å’Œåˆæˆå¤ç”¨åŸåˆ™ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>å¢åŠ äº†ç³»ç»Ÿçš„ç†è§£å’Œè®¾è®¡éš¾åº¦ï¼›</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>ç°æœ‰æ´¾çš„æ¥å£ç±»Pieï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public interface Pie &#123;</span><br><span class="line"></span><br><span class="line">    Pie makePie();</span><br><span class="line"></span><br><span class="line">    void getType();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŒ…å«åˆ¶ä½œæ´¾å’Œè·å–æ´¾ç±»å‹æŠ½è±¡æ–¹æ³•ã€‚</p>
<p>æ¥ç€åˆ›å»ºä¸¤ä¸ªPieçš„å®ç°ç±»ï¼Œè‹¹æœæ´¾AppliePieï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class ApplePie implements Pie &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Pie makePie() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œè‹¹æœæ´¾ğŸğŸ¥§&quot;);</span><br><span class="line">        return new ApplePie();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void getType() &#123;</span><br><span class="line">        System.out.println(&quot;æ°´æœæ´¾&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>èƒ¡èåœæ´¾CarrotPieï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class CarrotPie implements Pie&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Pie makePie() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œèƒ¡èåœæ´¾ğŸ¥•ğŸ¥§&quot;);</span><br><span class="line">        return new CarrotPie();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void getType() &#123;</span><br><span class="line">        System.out.println(&quot;è”¬èœæ²™æ‹‰æ´¾&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ¥ç€åˆ›å»ºä¸€ä¸ªåº—é“ºæŠ½è±¡ç±»Storeï¼Œé€šè¿‡å±æ€§çš„æ–¹å¼å’ŒPieç›¸å…³è”ï¼Œç›®çš„æ˜¯å¯ä»¥åœ¨ä¸åŒçš„åº—é“ºå®ç°ç±»ä¸­çµæ´»åœ°åˆ¶ä½œå„ç§æ´¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Store &#123;</span><br><span class="line"></span><br><span class="line">    protected Pie pie;</span><br><span class="line"></span><br><span class="line">    public Store(Pie pie)&#123;</span><br><span class="line">        this.pie &#x3D; pie;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    abstract Pie makePie();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>Storeå­ç±»ä¹‹ä¸€ï¼Œå±±å§†å¤§å”çš„å°åº—SamStoreï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class SamStore extends Store&#123;</span><br><span class="line"></span><br><span class="line">    public SamStore(Pie pie) &#123;</span><br><span class="line">        super(pie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    Pie makePie() &#123;</span><br><span class="line">        System.out.print(&quot;å±±å§†å¤§å”çš„å°åº—ğŸ’’&quot;);</span><br><span class="line">        return pie.makePie();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>Storeå­ç±»ä¹‹äºŒï¼Œæ°å…‹çš„å°åº—JackStoreï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class JackStore extends Store &#123;</span><br><span class="line"></span><br><span class="line">    public JackStore(Pie pie) &#123;</span><br><span class="line">        super(pie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    Pie makePie() &#123;</span><br><span class="line">        System.out.print(&quot;æ°å…‹çš„å°åº—ğŸ’’&quot;);</span><br><span class="line">        return pie.makePie();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å»ºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œæµ‹è¯•Pieçš„å®ç°ç±»å’ŒStoreçš„ç»§æ‰¿ç±»ä¹‹é—´çš„è‡ªç”±ç»„åˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Store samStore &#x3D; new SamStore(new ApplePie());</span><br><span class="line">        Pie samStorePie &#x3D; samStore.makePie();</span><br><span class="line">        samStorePie.getType();</span><br><span class="line"></span><br><span class="line">        Store jackStore &#x3D; new JackStore(new CarrotPie());</span><br><span class="line">        Pie jackStorePie &#x3D; jackStore.makePie();</span><br><span class="line">        jackStorePie.getType();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å±±å§†å¤§å”çš„å°åº—ğŸ’’åˆ¶ä½œè‹¹æœæ´¾ğŸğŸ¥§</span><br><span class="line">æ°´æœæ´¾</span><br><span class="line">æ°å…‹çš„å°åº—ğŸ’’åˆ¶ä½œèƒ¡èåœæ´¾ğŸ¥•ğŸ¥§</span><br><span class="line">è”¬èœæ²™æ‹‰æ´¾</span><br></pre></td></tr></table></figure>


<p>è¿™ä¸ªä¾‹å­å¾ˆå¥½åœ°ä½“ç°äº†æ¡¥æ¥æ¨¡å¼çš„ç‰¹ç‚¹ï¼ŒUMLå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ%E6%88%AA%E5%9B%BE20191220151943.png" alt="QQæˆªå›¾20191220151943.png"></p>
<h3 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h3><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ï¼Œä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œä»£ç†å¯¹è±¡åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°äº†ä¸­ä»‹çš„ä½œç”¨ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ol>
<li>ä¿æŠ¤ç›®æ ‡å¯¹è±¡ï¼›</li>
<li>å¢å¼ºç›®æ ‡å¯¹è±¡ã€‚</li>
</ol>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å°†ä»£ç†å¯¹è±¡å’ŒçœŸå®è¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼›</li>
<li>é™ä½è€¦åˆï¼Œæ‹“å±•æ€§å¥½ï¼›</li>
<li>ä¿æŠ¤ç›®æ ‡å¯¹è±¡ï¼Œå¢å¼ºç›®æ ‡å¯¹è±¡ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>é€ æˆç±»çš„æ•°ç›®å¢åŠ ï¼Œå¢åŠ å¤æ‚åº¦ï¼›</li>
<li>å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡å¢åŠ ä»£ç†å¯¹è±¡ï¼Œä¼šé€ æˆå¤„ç†é€Ÿåº¦å˜æ…¢ã€‚</li>
</ol>
<h4 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h4><p>é€šè¿‡åœ¨ä»£ç ä¸­æ˜¾å¼åœ°å®šä¹‰äº†ä¸€ä¸ªä»£ç†ç±»ï¼Œåœ¨ä»£ç†ç±»ä¸­é€šè¿‡åŒåçš„æ–¹æ³•å¯¹ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è¿›è¡ŒåŒ…è£…ï¼Œå®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨ä»£ç†ç±»çš„æ–¹æ³•æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p>ä¸¾ä¸ªé™æ€ä»£ç†çš„ä¾‹å­ï¼š</p>
<p>æ–°å»ºä¸€ä¸ªæ´¾çš„åˆ¶ä½œæ¥å£PieServiceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface PieServcie &#123;</span><br><span class="line">    void makePie();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åˆ›å»ºå…¶å®ç°ç±»PieServiceImplï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class PieServiceImpl implements PieServcie&#123;</span><br><span class="line">    public void makePie() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œğŸ¥—æ´¾&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¦å¯¹PieServiceImplçš„<code>makePie</code>æ–¹æ³•å¢å¼ºï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡PieServiceProxyï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class PieServiceProxy &#123;</span><br><span class="line"></span><br><span class="line">    private PieServcie pieServcie;</span><br><span class="line"></span><br><span class="line">    public void makePie() &#123;</span><br><span class="line">        beforeMethod();</span><br><span class="line">        pieServcie &#x3D; new PieServiceImpl();</span><br><span class="line">        pieServcie.makePie();</span><br><span class="line">        afterMethod();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void beforeMethod() &#123;</span><br><span class="line">        System.out.println(&quot;å‡†å¤‡ææ–™&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void afterMethod() &#123;</span><br><span class="line">        System.out.println(&quot;ä¿é²œ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åœ¨PieServiceProxyä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå’ŒPieServcieä¸€è‡´çš„åŒåæ–¹æ³•<code>makePie</code>ï¼Œæ–¹æ³•å†…éƒ¨è°ƒç”¨äº†PieServiceImplçš„<code>makePie</code>æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æ–¹æ³•è°ƒç”¨å‰è°ƒç”¨äº†ä»£ç†ç±»çš„<code>beforeMethod</code>æ–¹æ³•ï¼Œæ–¹æ³•è°ƒç”¨åè°ƒç”¨äº†ä»£ç†ç±»çš„<code>afterMethod</code>æ–¹æ³•ã€‚</p>
<p>åˆ›å»ºå®¢æˆ·ç«¯Applicationï¼Œæµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        PieServiceProxy proxy &#x3D; new PieServiceProxy();</span><br><span class="line">        proxy.makePie();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å‡†å¤‡ææ–™</span><br><span class="line">åˆ¶ä½œğŸ¥—æ´¾</span><br><span class="line">ä¿é²œ</span><br></pre></td></tr></table></figure>


<p>è¿™ä¸ªä¾‹å­çš„UMLå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ20200421-100633@2x.png" alt="QQ20200421-100633@2x"></p>
<h4 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h4><p>JDKçš„åŠ¨æ€ä»£ç†åªèƒ½ä»£ç†æ¥å£ï¼Œé€šè¿‡æ¥å£çš„æ–¹æ³•ååœ¨åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»ä¸­è°ƒç”¨ä¸šåŠ¡å®ç°ç±»çš„åŒåæ–¹æ³•ã€‚</p>
<p>é™æ€ä»£ç†çš„ç¼ºç‚¹å°±æ˜¯æ¯éœ€è¦ä»£ç†ä¸€ä¸ªç±»ï¼Œå°±éœ€è¦æ‰‹å†™å¯¹åº”çš„ä»£ç†ç±»ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨åŠ¨æ€ä»£ç†æ¥è§£å†³ã€‚ä¸¾ä¸ªåŠ¨æ€ä»£ç†çš„ä¾‹å­ï¼š</p>
<p>æ–°å»ºå†°æ·‡æ·‹åˆ¶ä½œæ¥å£IceCreamServiceï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface IceCreamService &#123;</span><br><span class="line">    void makeIceCream(String fruit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å®ç°ç±»IceCreamServiceImplï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class IceCreamServiceImpl implements IceCreamService &#123;</span><br><span class="line"></span><br><span class="line">    public void makeIceCream(String fruit) &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œ&quot; + fruit + &quot;ğŸ¦&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç°åœ¨éœ€è¦å¯¹IceCreamServiceImplè¿›è¡Œä»£ç†å¢å¼ºï¼Œå¦‚æœä½¿ç”¨é™æ€ä»£ç†ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªIceCreamServiceImplProxyç±»ï¼Œä½¿ç”¨åŠ¨æ€ä»£ç†çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„ä»£ç†ç±»ã€‚</p>
<p>åˆ›å»ºDynamicProxyï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class DynamicProxy implements InvocationHandler &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ä»£ç†çš„ç›®æ ‡å¯¹è±¡</span><br><span class="line">    private Object object;</span><br><span class="line"></span><br><span class="line">    public DynamicProxy(Object object) &#123;</span><br><span class="line">        this.object &#x3D; object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object proxy() &#123;</span><br><span class="line">        Class&lt;?&gt; clazz &#x3D; object.getClass();</span><br><span class="line">        &#x2F;&#x2F; ç”Ÿæˆä»£ç†å¯¹è±¡</span><br><span class="line">        return Proxy.newProxyInstance(clazz.getClassLoader(),</span><br><span class="line">                clazz.getInterfaces(), this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * @param proxy  åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡</span><br><span class="line">     * @param method ä»£ç†æ–¹æ³•</span><br><span class="line">     * @param args   ä»£ç†æ–¹æ³•çš„æ–¹æ³•å‚æ•°</span><br><span class="line">     * @return ç»“æœ</span><br><span class="line">     * @throws Throwable</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">       return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŠ¨æ€ä»£ç†ç±»é€šè¿‡å®ç°InvocationHandlerçš„<code>invoke</code>æ–¹æ³•å®ç°ï¼Œ<code>proxy</code>ç”¨äºç”Ÿæˆä»£ç†å¯¹è±¡ã€‚å‰©ä¸‹çš„æ­¥éª¤å’Œé™æ€ä»£ç†ç±»ä¼¼ï¼Œå®Œå–„DynamicProxyï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">public class DynamicProxy implements InvocationHandler &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; ä»£ç†çš„ç›®æ ‡å¯¹è±¡</span><br><span class="line">    private Object object;</span><br><span class="line"></span><br><span class="line">    public DynamicProxy(Object object) &#123;</span><br><span class="line">        this.object &#x3D; object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object proxy() &#123;</span><br><span class="line">        Class&lt;?&gt; clazz &#x3D; object.getClass();</span><br><span class="line">        &#x2F;&#x2F; ç”Ÿæˆä»£ç†å¯¹è±¡</span><br><span class="line">        return Proxy.newProxyInstance(clazz.getClassLoader(),</span><br><span class="line">                clazz.getInterfaces(), this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * @param proxy  åŠ¨æ€ç”Ÿæˆçš„ä»£ç†å¯¹è±¡</span><br><span class="line">     * @param method ä»£ç†æ–¹æ³•</span><br><span class="line">     * @param args   ä»£ç†æ–¹æ³•çš„æ–¹æ³•å‚æ•°</span><br><span class="line">     * @return ç»“æœ</span><br><span class="line">     * @throws Throwable</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">        beforeMethod(object);</span><br><span class="line">        &#x2F;&#x2F; åå°„æ‰§è¡Œä»£ç†å¯¹è±¡çš„ç›®æ ‡æ–¹æ³•</span><br><span class="line">        Object result &#x3D; method.invoke(object, args);</span><br><span class="line">        afterMethod(object);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void beforeMethod(Object object) &#123;</span><br><span class="line">        if (object instanceof PieServcie) &#123;</span><br><span class="line">            System.out.println(&quot;å‡†å¤‡æ´¾çš„ææ–™&quot;);</span><br><span class="line">        &#125; else if (object instanceof IceCreamService) &#123;</span><br><span class="line">            System.out.println(&quot;å‡†å¤‡å†°æ·‡æ·‹ææ–™&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            throw new RuntimeException(&quot;æš‚ä¸æ”¯æŒä»£ç†&quot; + object.getClass() + &quot;ç±»å‹&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void afterMethod(Object object) &#123;</span><br><span class="line">        if (object instanceof PieServcie) &#123;</span><br><span class="line">            System.out.println(&quot;ä¿é²œæ´¾&quot;);</span><br><span class="line">        &#125; else if (object instanceof IceCreamService) &#123;</span><br><span class="line">            System.out.println(&quot;ä¿é²œå†°æ·‡æ·‹&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            throw new RuntimeException(&quot;æš‚ä¸æ”¯æŒä»£ç†&quot; + object.getClass() + &quot;ç±»å‹&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå®¢æˆ·ç«¯Applicationæµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        PieServcie pieServiceDynamicProxy &#x3D; (PieServcie) new DynamicProxy(new PieServiceImpl()).proxy();</span><br><span class="line">        pieServiceDynamicProxy.makePie();</span><br><span class="line">        System.out.println(&quot;-----------------&quot;);</span><br><span class="line">        IceCreamService iceCreamServiceDynamicProxy &#x3D; (IceCreamService) new DynamicProxy(new IceCreamServiceImpl()).proxy();</span><br><span class="line">        iceCreamServiceDynamicProxy.makeIceCream(&quot;ğŸ“&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å‡†å¤‡æ´¾çš„ææ–™</span><br><span class="line">åˆ¶ä½œğŸ¥—æ´¾</span><br><span class="line">ä¿é²œæ´¾</span><br><span class="line">-----------------</span><br><span class="line">å‡†å¤‡å†°æ·‡æ·‹ææ–™</span><br><span class="line">åˆ¶ä½œğŸ“ğŸ¦</span><br><span class="line">ä¿é²œå†°æ·‡æ·‹</span><br></pre></td></tr></table></figure>


<p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åŠ¨æ€ä»£ç†æˆ‘ä»¬å®ç°äº†ç›®æ ‡æ–¹æ³•å¢å¼ºï¼Œå¹¶ä¸”ä¸éœ€è¦æ‰‹å†™ç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚</p>
<h4 id="CGLibä»£ç†"><a href="#CGLibä»£ç†" class="headerlink" title="CGLibä»£ç†"></a>CGLibä»£ç†</h4><p>é€šè¿‡ç»§æ‰¿æ¥å®ç°ï¼Œç”Ÿæˆçš„ä»£ç†ç±»å°±æ˜¯ç›®æ ‡å¯¹è±¡ç±»çš„å­ç±»ï¼Œé€šè¿‡é‡å†™ä¸šåŠ¡æ–¹æ³•æ¥å®ç°ä»£ç†ã€‚</p>
<h4 id="Springå¯¹ä»£ç†æ¨¡å¼çš„æ‹“å±•"><a href="#Springå¯¹ä»£ç†æ¨¡å¼çš„æ‹“å±•" class="headerlink" title="Springå¯¹ä»£ç†æ¨¡å¼çš„æ‹“å±•"></a>Springå¯¹ä»£ç†æ¨¡å¼çš„æ‹“å±•</h4><ol>
<li>å½“Beanæœ‰å®ç°æ¥å£æ—¶ï¼Œä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼›</li>
<li>å½“Beanæ²¡æœ‰å®ç°æ¥å£æ—¶ï¼Œä½¿ç”¨CGLibä»£ç†ã€‚</li>
</ol>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹é…ç½®å¼ºåˆ¶ä½¿ç”¨CGLibä»£ç†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  aop:</span><br><span class="line">    proxy-target-class: true</span><br></pre></td></tr></table></figure>


<h2 id="è¡Œä¸ºå‹æ¨¡å¼"><a href="#è¡Œä¸ºå‹æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹æ¨¡å¼"></a>è¡Œä¸ºå‹æ¨¡å¼</h2><h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªæµç¨‹çš„éª¨æ¶ï¼Œç”±å¤šä¸ªæ–¹æ³•ç»„æˆã€‚å¹¶å…è®¸å­ç±»ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤æä¾›å®ç°ã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯å…¬å…±çš„ä¸å˜çš„éƒ¨åˆ†ç”±çˆ¶ç±»ç»Ÿä¸€å®ç°ï¼Œå˜åŒ–çš„éƒ¨åˆ†ç”±å­ç±»æ¥ä¸ªæ€§åŒ–å®ç°ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>æé«˜å¤ç”¨æ€§ï¼›</li>
<li>æé«˜æ‹“å±•æ€§ï¼›</li>
<li>ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>ç±»çš„æ•°ç›®å¢åŠ ï¼›</li>
<li>å¢åŠ äº†ç³»ç»Ÿå®ç°çš„å¤æ‚åº¦ï¼›</li>
<li>çˆ¶ç±»æ·»åŠ æ–°çš„æŠ½è±¡æ–¹æ³•ï¼Œæ‰€æœ‰å­ç±»éƒ½è¦æ”¹ä¸€éã€‚</li>
</ol>
<p>ä¸¾ä¸ªæ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ä¾‹å­ã€‚å®šä¹‰ä¸€ä¸ªå¤–å–çš„æ¥å£ï¼ŒåŒ…å«ä¸‹å•ã€åˆ¶ä½œå’Œæ‰“åŒ…é…é€ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Takeaway &#123;</span><br><span class="line"></span><br><span class="line">    final void order() &#123;</span><br><span class="line">        System.out.println(&quot;ä¸‹å•&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    final void packageSend() &#123;</span><br><span class="line">        System.out.println(&quot;æ‰“åŒ…æ´¾é€&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected abstract void make();</span><br><span class="line"></span><br><span class="line">    protected boolean needTableware() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    final void flow() &#123;</span><br><span class="line">        this.order();</span><br><span class="line">        this.make();</span><br><span class="line">        if (needTableware()) &#123;</span><br><span class="line">            System.out.println(&quot;èµ é€ä¸€æ¬¡æ€§é¤å…·&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        this.packageSend();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å…¶ä¸­ä¸‹å•å’Œæ‰“åŒ…é…é€è¡Œä¸ºæ˜¯å›ºå®šçš„ï¼Œä¸åŒçš„æ˜¯åˆ¶ä½œè¿‡ç¨‹ï¼Œæ‰€ä»¥<code>order</code>å’Œ<code>packageSend</code>æ–¹æ³•æä¾›äº†é»˜è®¤å®ç°ï¼Œå¹¶ä¸”ç”±finalä¿®é¥°ï¼Œå­ç±»ä¸å¯é‡å†™ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡<code>needTableware</code>è¿™ä¸ªé’©å­æ–¹æ³•æ¥æ§åˆ¶æŸäº›å­ç±»çš„å®šåˆ¶åŒ–éœ€æ±‚ã€‚</p>
<p>æ–°å¢BarbecueTakeawayç»§æ‰¿Takeawayï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class BarbecueTakeaway extends Takeaway &#123;</span><br><span class="line"></span><br><span class="line">    private final boolean needTableware;</span><br><span class="line"></span><br><span class="line">    public BarbecueTakeaway(boolean needTableware) &#123;</span><br><span class="line">        this.needTableware &#x3D; needTableware;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void make() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ¶ä½œçƒ¤è‚‰&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected boolean needTableware() &#123;</span><br><span class="line">        return this.needTableware;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å¢FruitTakeawayç»§æ‰¿Takeawayï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class FruitTakeaway extends Takeaway &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void make() &#123;</span><br><span class="line">        System.out.println(&quot;æ°´æœé…è´§&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected boolean needTableware() &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æ–°å¢ä¸ªå®¢æˆ·ç«¯Applicationæµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Takeaway barbecue &#x3D; new BarbecueTakeaway(true);</span><br><span class="line">        barbecue.flow();</span><br><span class="line"></span><br><span class="line">        FruitTakeaway fruit &#x3D; new FruitTakeaway();</span><br><span class="line">        fruit.flow();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¸‹å•</span><br><span class="line">åˆ¶ä½œçƒ¤è‚‰</span><br><span class="line">èµ é€ä¸€æ¬¡æ€§é¤å…·</span><br><span class="line">æ‰“åŒ…æ´¾é€</span><br><span class="line">ä¸‹å•</span><br><span class="line">æ°´æœé…è´§</span><br><span class="line">æ‰“åŒ…æ´¾é€</span><br></pre></td></tr></table></figure>
<p>UMLï¼š</p>
<p><img src="https://mrbird.cc/img/QQ20200421-153516@2x.png" alt="QQ20200421-153516@2x"></p>
<h3 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h3><p>ignore</p>
<h3 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h3><p>ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚æ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„ç”¨æˆ·ã€‚ç­–ç•¥æ¨¡å¼å¸¸ç”¨äºæ¶ˆé™¤å¤§é‡çš„if elseä»£ç ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>ç³»ç»Ÿæœ‰å¾ˆå¤šç±»ï¼Œå®ƒä»¬çš„åŒºåˆ«ä»…ä»…åœ¨äºè¡Œä¸ºä¸åŒï¼›</li>
<li>ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ï¼›</li>
</ol>
<p>ä¸¾ä¸ªç­–ç•¥æ¨¡å¼çš„ä¾‹å­ï¼ˆä¿ƒé”€æ´»åŠ¨ï¼‰ï¼Œå®šä¹‰ä¸€ä¸ªä¿ƒé”€ç­–ç•¥æ¥å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface PromotionStrategy &#123;</span><br><span class="line"></span><br><span class="line">    void promotion();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å®ç°ç±»ä¹‹ä¸€ï¼ˆç­–ç•¥ä¹‹ä¸€ï¼‰ï¼Œæ»¡å‡ä¿ƒé”€ç­–ç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class FullReductionPromotionStrategy implements PromotionStrategy &#123;</span><br><span class="line">    public void promotion() &#123;</span><br><span class="line">        System.out.println(&quot;æ»¡1000ç«‹å‡1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å®ç°ç±»ä¹‹ä¸€ï¼ˆç­–ç•¥ä¹‹ä¸€ï¼‰ï¼Œæ‰“æŠ˜ä¿ƒé”€ç­–ç•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class DiscountPromotionStrategy implements PromotionStrategy &#123;</span><br><span class="line">    public void promotion() &#123;</span><br><span class="line">        System.out.println(&quot;9.9æŠ˜é’œæƒ &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯æµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; æ¨¡æ‹Ÿå®¢æˆ·ç«¯ä¼ é€’çš„ä¿ƒé”€ç­–ç•¥key</span><br><span class="line">        String promotionKey &#x3D; &quot;fr&quot;;</span><br><span class="line">        PromotionStrategy strategy;</span><br><span class="line">        if (&quot;fr&quot;.equals(promotionKey)) &#123;</span><br><span class="line">            strategy &#x3D; new FullReductionPromotionStrategy();</span><br><span class="line">        &#125; else if (&quot;ds&quot;.equals(promotionKey)) &#123;</span><br><span class="line">            strategy &#x3D; new DiscountPromotionStrategy();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            throw new RuntimeException(&quot;æš‚ä¸æ”¯æŒè¯¥ä¿ƒé”€æ´»åŠ¨&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        strategy.promotion();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ»¡1000ç«‹å‡1</span><br></pre></td></tr></table></figure>


<p>ç­–ç•¥æ¨¡å¼å¸¸ç»“åˆå·¥å‚æ¨¡å¼æ¥æ¶ˆé™¤å¤§é‡çš„if elseä»£ç ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªä¿ƒé”€ç­–ç•¥çš„åˆ›å»ºå·¥å‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class PromotionStrategyFactory &#123;</span><br><span class="line"></span><br><span class="line">    private static final Map&lt;String, PromotionStrategy&gt; PROMOTION_STRATEGY_MAP &#x3D; new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    private static final PromotionStrategy NON_PROMOTION &#x3D; () -&gt; System.out.println(&quot;æ— ä¿ƒé”€æ´»åŠ¨&quot;);</span><br><span class="line"></span><br><span class="line">    static &#123;</span><br><span class="line">        PROMOTION_STRATEGY_MAP.put(PromotionKey.FR, new FullReductionPromotionStrategy());</span><br><span class="line">        PROMOTION_STRATEGY_MAP.put(PromotionKey.DS, new DiscountPromotionStrategy());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private PromotionStrategyFactory() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static PromotionStrategy getPromotionStrategy(String promotionKey) &#123;</span><br><span class="line">        PromotionStrategy strategy &#x3D; PROMOTION_STRATEGY_MAP.get(promotionKey);</span><br><span class="line">        return strategy &#x3D;&#x3D; null ? NON_PROMOTION : strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private interface PromotionKey &#123;</span><br><span class="line">        String FR &#x3D; &quot;fr&quot;;</span><br><span class="line">        String DS &#x3D; &quot;ds&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Mapæ¥è£…è½½ä¿ƒé”€ç­–ç•¥ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¯¹è±¡çš„é‡å¤åˆ›å»ºã€‚å¦‚æœä¸å¸Œæœ›åœ¨staticå—ä¸­ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰ä¿ƒé”€ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆäº«å…ƒæ¨¡å¼æ¥æ¨è¿Ÿå¯¹è±¡åˆ›å»ºè¿‡ç¨‹ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªå·¥å‚æ–¹æ³•ï¼Œä¸Šé¢å®¢æˆ·ç«¯ä»£ç å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F; æ¨¡æ‹Ÿå®¢æˆ·ç«¯ä¼ é€’çš„ä¿ƒé”€ç­–ç•¥key</span><br><span class="line">        String promotionKey &#x3D; &quot;fr&quot;;</span><br><span class="line">        PromotionStrategy promotionStrategy &#x3D; PromotionStrategyFactory.getPromotionStrategy(promotionKey);</span><br><span class="line">        promotionStrategy.promotion();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h3><p>ç”¨çš„è¾ƒå°‘ï¼Œæš‚ä¸è®°å½•ã€‚</p>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…åŒæ—¶ç›‘å¬æŸä¸ªä¸»é¢˜å¯¹è±¡ï¼Œå½“ä¸»ä½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒçš„æ‰€æœ‰è§‚å¯Ÿè€…éƒ½ä¼šæ”¶åˆ°å“åº”çš„é€šçŸ¥ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆï¼›</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šä¿¡ã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>è§‚å¯Ÿè€…ä¹‹é—´æœ‰è¿‡å¤šçš„ç»†èŠ‚ä¾èµ–ï¼Œæé«˜æ—¶é—´æ¶ˆè€—åŠç¨‹åºå¤æ‚åº¦ï¼›</li>
<li>åº”é¿å…å¾ªç¯è°ƒç”¨ã€‚</li>
</ol>
<p>JDKå¯¹è§‚å¯Ÿè€…æ¨¡å¼æä¾›äº†æ”¯æŒã€‚ä¸‹é¢ä¸¾ä¸ªè§‚å¯Ÿè€…æ¨¡å¼çš„ä¾‹å­ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªåšå®¢ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * ç»§æ‰¿ Observableç±»ï¼ŒBlogä¸ºè¢«è§‚å¯Ÿå¯¹è±¡</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class Blog extends Observable &#123;</span><br><span class="line"></span><br><span class="line">    private String title;</span><br><span class="line"></span><br><span class="line">    public Blog(String title) &#123;</span><br><span class="line">        this.title &#x3D; title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getTitle() &#123;</span><br><span class="line">        return title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void comment(Comment comment) &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(comment.getNickname() + &quot;è¯„è®ºäº†&lt;&quot; + this.title + &quot;&gt; ï¼Œ&quot; +</span><br><span class="line">                &quot;è¯„è®ºå†…å®¹ï¼š&quot; + comment.getValue());</span><br><span class="line">        &#x2F;&#x2F; è®¾ç½®æ ‡è¯†ä½ changed &#x3D; trueï¼Œè¡¨ç¤ºè¢«è§‚å¯Ÿè€…å‘ç”Ÿäº†æ”¹å˜</span><br><span class="line">        setChanged();</span><br><span class="line">        &#x2F;&#x2F; é€šçŸ¥è§‚å¯Ÿè€…ï¼Œå¯ä»¥ç»™è§‚å¯Ÿè€…ä¼ é€’æ•°æ®</span><br><span class="line">        notifyObservers(comment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>Commentç±»ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Comment &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * è¯„è®ºè€…æ˜µç§°</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private String nickname;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * è¯„è®ºå†…å®¹</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private String value;</span><br><span class="line"></span><br><span class="line">    public Comment(String nickname, String value) &#123;</span><br><span class="line">        this.nickname &#x3D; nickname;</span><br><span class="line">        this.value &#x3D; value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getValue() &#123;</span><br><span class="line">        return value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getNickname() &#123;</span><br><span class="line">        return nickname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>Blogç±»æ˜¯è¢«è§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¢«è§‚å¯Ÿè€…å¯¹è±¡éœ€è¦ç»§æ‰¿JDKçš„Observableç±»ï¼Œç»§æ‰¿åï¼Œè¢«è§‚å¯Ÿè€…å¯¹è±¡åŒ…å«å¦‚ä¸‹å±æ€§å’Œæ–¹æ³•ï¼š</p>
<p><img src="https://mrbird.cc/img/QQ20200511-093515@2x.png" alt="QQ20200511-093515@2x"></p>
<p>è¿™äº›æ–¹æ³•éƒ½æ˜¯çº¿ç¨‹å®‰å…¨æ–¹æ³•ï¼ˆåŠ äº†synchronizedåŒæ­¥é”ï¼‰ã€‚</p>
<p>Blogçš„commentæ–¹æ³•ä¸­ï¼Œå½“åšå®¢æ”¶åˆ°è¯„è®ºæ—¶ï¼Œé¦–å…ˆè°ƒç”¨çˆ¶ç±»çš„setChanged()æ–¹æ³•ï¼Œè®¾ç½®æ ‡è¯†ä½ changed = trueï¼Œè¡¨ç¤ºè¢«è§‚å¯Ÿè€…å‘ç”Ÿäº†æ”¹å˜ï¼›ç„¶åè°ƒç”¨çˆ¶ç±»çš„notifyObservers(Object)æ–¹æ³•é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ã€‚</p>
<p>è¢«è§‚å¯Ÿè€…å¯¹è±¡åˆ›å»ºå¥½åï¼Œæˆ‘ä»¬æ¥ç€åˆ›å»ºè§‚å¯Ÿè€…ã€‚æ–°å»ºä¸€ä¸ªAuthorç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Author implements Observer &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public Author(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * è§‚å¯Ÿè€…è¢«é€šçŸ¥åï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</span><br><span class="line">     *</span><br><span class="line">     * @param o   è¢«è§‚å¯Ÿè€…å¯¹è±¡</span><br><span class="line">     * @param arg è¢«è§‚å¯Ÿè€…ä¼ é€’è¿‡æ¥çš„æ•°æ®</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Override</span><br><span class="line">    public void update(Observable o, Object arg) &#123;</span><br><span class="line">        Blog blog &#x3D; (Blog) o;</span><br><span class="line">        Comment comment &#x3D; (Comment) arg;</span><br><span class="line">        System.out.println(&quot;ç³»ç»Ÿæ„ŸçŸ¥åˆ°&quot; + this.name + &quot;æ’°å†™çš„åšæ–‡&lt;&quot; +</span><br><span class="line">                blog.getTitle() + &quot;&gt;æ”¶åˆ°äº†&quot; + comment.getNickname() +</span><br><span class="line">                &quot;çš„è¯„è®ºï¼Œè¯„è®ºå†…å®¹ä¸ºï¼š&quot; + comment.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>è§‚å¯Ÿè€…å¯¹è±¡éœ€è¦å®ç°JDKçš„Observerç±»ï¼Œé‡å†™updateæ–¹æ³•ã€‚å½“è¢«è§‚å¯Ÿè€…å¯¹è±¡è°ƒç”¨äº†notifyObserversæ–¹æ³•åï¼Œç›¸åº”çš„è§‚å¯Ÿè€…çš„updateæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªå®¢æˆ·ç«¯æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Blog blog &#x3D; new Blog(&quot;Javaä»å…¥é—¨åˆ°æ”¾å¼ƒ&quot;);</span><br><span class="line">        Author author &#x3D; new Author(&quot;MrBird&quot;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; æ·»åŠ è§‚å¯Ÿè€…</span><br><span class="line">        blog.addObserver(author);</span><br><span class="line"></span><br><span class="line">        Comment comment &#x3D; new Comment(&quot;Scott&quot;,</span><br><span class="line">                &quot;æ„Ÿè°¢æ¥¼ä¸»çš„æ–‡ç« ï¼Œè®©æˆ‘åŠæ—¶æ”¾å¼ƒJavaï¼Œå›å®¶ç»§æ‰¿äº†åƒä¸‡å®¶äº§ã€‚&quot;);</span><br><span class="line">        blog.comment(comment);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ç¨‹åºè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Scottè¯„è®ºäº†&lt;Javaä»å…¥é—¨åˆ°æ”¾å¼ƒ&gt; ï¼Œè¯„è®ºå†…å®¹ï¼šæ„Ÿè°¢æ¥¼ä¸»çš„æ–‡ç« ï¼Œè®©æˆ‘åŠæ—¶æ”¾å¼ƒJavaï¼Œå›å®¶ç»§æ‰¿äº†åƒä¸‡å®¶äº§ã€‚</span><br><span class="line">ç³»ç»Ÿæ„ŸçŸ¥åˆ°MrBirdæ’°å†™çš„åšæ–‡&lt;Javaä»å…¥é—¨åˆ°æ”¾å¼ƒ&gt;æ”¶åˆ°äº†Scottçš„è¯„è®ºï¼Œè¯„è®ºå†…å®¹ä¸ºï¼šæ„Ÿè°¢æ¥¼ä¸»çš„æ–‡ç« ï¼Œè®©æˆ‘åŠæ—¶æ”¾å¼ƒJavaï¼Œå›å®¶ç»§æ‰¿äº†åƒä¸‡å®¶äº§ã€‚</span><br></pre></td></tr></table></figure>


<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè§‚å¯Ÿè€…çš„updateæ–¹æ³•é‡Œçš„é€»è¾‘æœ€å¥½è¿›è¡Œå¼‚æ­¥åŒ–ï¼Œè¿™æ ·åœ¨å¹¶å‘ç¯å¢ƒä¸‹å¯ä»¥æå‡ç¨‹åºæ€§èƒ½ã€‚</p>
<h3 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h3><p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/jimoer/p/9537997.html%E3%80%82">https://www.cnblogs.com/jimoer/p/9537997.htmlã€‚</a></p>
<h3 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h3><p>æš‚ä¸è®°å½•ã€‚</p>
<h3 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h3><p>æš‚ä¸è®°å½•ã€‚</p>
<h3 id="èŒè´£é“¾æ¨¡å¼"><a href="#èŒè´£é“¾æ¨¡å¼" class="headerlink" title="èŒè´£é“¾æ¨¡å¼"></a>èŒè´£é“¾æ¨¡å¼</h3><p>èŒè´£é“¾æ¨¡å¼ä¸ºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ¥æ”¶æ­¤æ¬¡è¯·æ±‚å¯¹è±¡çš„é“¾ã€‚</p>
<p>é€‚ç”¨äºï¼š</p>
<ul>
<li>ä¸€ä¸ªè¯·æ±‚çš„å¤„ç†éœ€è¦å¤šä¸ªå¯¹è±¡å½“ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ªåä½œå¤„ç†ï¼›</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ï¼ˆè¯·æ±‚çš„å¤„ç†ï¼‰è§£è€¦ï¼›</li>
<li>èŒè´£é“¾å¯ä»¥åŠ¨æ€çš„ç»„åˆã€‚</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>èŒè´£é“¾å¤ªé•¿æˆ–è€…å¤„ç†æ—¶é—´è¿‡é•¿ï¼Œå½±å“æ€§èƒ½ï¼›</li>
<li>èŒè´£é“¾å¯èƒ½è¿‡å¤šã€‚</li>
</ol>
<p>ä¸¾ä¸ªå­—ç¬¦ä¸²æ ¡éªŒçš„ä¾‹å­ã€‚æ–°å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ ¡éªŒæŠ½è±¡ç±»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public abstract class StringValidator &#123;</span><br><span class="line"></span><br><span class="line">    protected StringValidator validator;</span><br><span class="line"></span><br><span class="line">    public void setNextValidator(StringValidator validator) &#123;</span><br><span class="line">        this.validator &#x3D; validator;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract void check(String value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>StringValidatorç±»åŒ…å«äº†ä¸€ä¸ªè‡ªèº«ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯è¯¥æ¨¡å¼çš„è®¾è®¡æ ¸å¿ƒï¼Œä»¥æ­¤å½¢æˆé“¾æ¡ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªæ ¡éªŒå­—ç¬¦ä¸²é•¿åº¦çš„ç±»StringLengthValidatorï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class StringLengthValidator extends StringValidator &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void check(String value) &#123;</span><br><span class="line">        if (value !&#x3D; null &amp;&amp; value.length() !&#x3D; 0) &#123;</span><br><span class="line">            System.out.println(&quot;å­—ç¬¦ä¸²é•¿åº¦åˆæ³•&quot;);</span><br><span class="line">            if (validator !&#x3D; null) &#123;</span><br><span class="line">                validator.check(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;å­—ç¬¦ä¸²é•¿åº¦ä¸åˆæ³•&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨å­—ç¬¦ä¸²é•¿åº¦æ ¡éªŒåˆæ³•åï¼Œæˆ‘ä»¬åˆ¤æ–­çˆ¶ç±»çš„validatorå±æ€§æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™è°ƒç”¨å…¶checkæ–¹æ³•ç»§ç»­ä¸‹ä¸€æ­¥æ ¡éªŒã€‚</p>
<p>æ¥ç€å†æ–°å»ºä¸€ä¸ªæ ¡éªŒå­—ç¬¦ä¸²å†…å®¹çš„ç±»StringValueValidatorï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class StringValueValidator extends StringValidator &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void check(String value) &#123;</span><br><span class="line">        if (value.contains(&quot;fuck&quot;)) &#123;</span><br><span class="line">            System.out.println(&quot;å­—ç¬¦ä¸²å€¼ä¸åˆæ³•&quot;);</span><br><span class="line">            if (validator !&#x3D; null) &#123;</span><br><span class="line">                validator.check(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;å­—ç¬¦ä¸²å€¼åˆæ³•&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>å¥—è·¯å’ŒStringLengthValidatorä¸€æ ·ã€‚æ¥ç€åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ç±»ï¼Œæ¼”ç¤ºä¸‹å¦‚ä½•è®©æ ¡éªŒç±»å½¢æˆä¸€ä¸ªé“¾æ¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Application &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        StringValidator lengthValidator &#x3D; new StringLengthValidator();</span><br><span class="line">        StringValidator valueValidator &#x3D; new StringValueValidator();</span><br><span class="line"></span><br><span class="line">        lengthValidator.setNextValidator(valueValidator);</span><br><span class="line">        lengthValidator.check(&quot;hello&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé€šè¿‡StringValidatorçš„setNextValidatoræ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸‹ä¸€ä¸ªæ ¡éªŒç±»ï¼Œä»¥æ­¤å½¢æˆé“¾æ¡ï¼Œç¨‹åºè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦ä¸²é•¿åº¦åˆæ³•</span><br><span class="line">å­—ç¬¦ä¸²å€¼åˆæ³•</span><br></pre></td></tr></table></figure>


<h3 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h3><p>æš‚ä¸è®°å½•ğŸŒš</p>
<h3 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h3><p>æš‚ä¸è®°å½•ğŸŒš</p>
<blockquote>
<p>å‚è€ƒè¿æ¥ï¼š<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA)">https://zh.wikipedia.org/wiki/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_(%E8%AE%A1%E7%AE%97%E6%9C%BA)</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2021/12/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">http://example.com/2021/12/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2021/12/01/Spring%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Springæºç </div></div></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/null" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">Javaè®¾è®¡æ¨¡å¼å­¦ä¹ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">åˆ›å»ºå‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">ç®€å•å·¥å‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">å·¥å‚æ–¹æ³•æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">æŠ½è±¡å·¥å‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">å»ºé€ è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.</span> <span class="toc-text">å•ä¾‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%87%92%E6%B1%89%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.1.</span> <span class="toc-text">æ‡’æ±‰æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E9%87%8D%E5%90%8C%E6%AD%A5%E9%94%81%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.2.</span> <span class="toc-text">åŒé‡åŒæ­¥é”å•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.3.</span> <span class="toc-text">é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A5%BF%E6%B1%89%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.4.</span> <span class="toc-text">é¥¿æ±‰å•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E7%A0%B4%E5%9D%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.5.</span> <span class="toc-text">åºåˆ—åŒ–ç ´åå•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E7%A0%B4%E5%9D%8F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.6.</span> <span class="toc-text">åå°„ç ´åå•ä¾‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.7.</span> <span class="toc-text">æšä¸¾å•ä¾‹æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.6.</span> <span class="toc-text">åŸå‹æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">ç»“æ„å‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">å¤–è§‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">è£…é¥°è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.3.</span> <span class="toc-text">é€‚é…å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.4.</span> <span class="toc-text">äº«å…ƒæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.5.</span> <span class="toc-text">ç»„åˆæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.6.</span> <span class="toc-text">æ¡¥æ¥æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.7.</span> <span class="toc-text">ä»£ç†æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">3.7.1.</span> <span class="toc-text">é™æ€ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">3.7.2.</span> <span class="toc-text">åŠ¨æ€ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CGLib%E4%BB%A3%E7%90%86"><span class="toc-number">3.7.3.</span> <span class="toc-text">CGLibä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring%E5%AF%B9%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%8B%93%E5%B1%95"><span class="toc-number">3.7.4.</span> <span class="toc-text">Springå¯¹ä»£ç†æ¨¡å¼çš„æ‹“å±•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">è¡Œä¸ºå‹æ¨¡å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">è¿­ä»£å™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.3.</span> <span class="toc-text">ç­–ç•¥æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.4.</span> <span class="toc-text">è§£é‡Šå™¨æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.5.</span> <span class="toc-text">è§‚å¯Ÿè€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.6.</span> <span class="toc-text">å¤‡å¿˜å½•æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.7.</span> <span class="toc-text">å‘½ä»¤æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.8.</span> <span class="toc-text">ä¸­ä»‹è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.9.</span> <span class="toc-text">èŒè´£é“¾æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.10.</span> <span class="toc-text">è®¿é—®è€…æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.11.</span> <span class="toc-text">çŠ¶æ€æ¨¡å¼</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/12/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="Javaè®¾è®¡æ¨¡å¼"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Javaè®¾è®¡æ¨¡å¼"/></a><div class="content"><a class="title" href="/2021/12/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="Javaè®¾è®¡æ¨¡å¼">Javaè®¾è®¡æ¨¡å¼</a><time datetime="2021-11-30T16:02:17.000Z" title="Created 2021-12-01 00:02:17">2021-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/01/Spring%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Springæºç "><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Springæºç "/></a><div class="content"><a class="title" href="/2021/12/01/Spring%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/" title="Springæºç ">Springæºç </a><time datetime="2021-11-30T16:02:17.000Z" title="Created 2021-12-01 00:02:17">2021-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/01/Docker/" title="Docker"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker"/></a><div class="content"><a class="title" href="/2021/12/01/Docker/" title="Docker">Docker</a><time datetime="2021-11-30T16:02:17.000Z" title="Created 2021-12-01 00:02:17">2021-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/15/ElasticSearch%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" title="ElasticSearchåŸºæœ¬æ“ä½œ"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearchåŸºæœ¬æ“ä½œ"/></a><div class="content"><a class="title" href="/2021/04/15/ElasticSearch%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" title="ElasticSearchåŸºæœ¬æ“ä½œ">ElasticSearchåŸºæœ¬æ“ä½œ</a><time datetime="2021-04-15T14:33:54.000Z" title="Created 2021-04-15 22:33:54">2021-04-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/03/10/JSON%E5%AF%B9%E8%B1%A1%E8%BD%AC%E5%8C%96/" title="JSONå¯¹è±¡è½¬åŒ–"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JSONå¯¹è±¡è½¬åŒ–"/></a><div class="content"><a class="title" href="/2021/03/10/JSON%E5%AF%B9%E8%B1%A1%E8%BD%AC%E5%8C%96/" title="JSONå¯¹è±¡è½¬åŒ–">JSONå¯¹è±¡è½¬åŒ–</a><time datetime="2021-03-10T14:10:23.000Z" title="Created 2021-03-10 22:10:23">2021-03-10</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>